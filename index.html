<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook Ads Dashboard - Unified Analytics Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1877f2;
            --primary-dark: #166fe5;
            --success-color: #00a67e;
            --warning-color: #f5a623;
            --danger-color: #e74c3c;
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --text-primary: #1c1e21;
            --text-secondary: #65676b;
            --border-color: #dddfe2;
            --sidebar-width: 260px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.5;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: var(--card-bg);
            border-right: 1px solid var(--border-color);
            padding: 0;
            overflow-y: auto;
            z-index: 100;
        }

        .logo {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 12px;
            min-height: 73px;
            display: flex;
            align-items: center;
            box-sizing: border-box;
        }

        .logo h1 {
            font-size: 18px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0;
        }

        .logo h1 i {
            font-size: 24px;
        }

        .nav-section {
            padding: 8px 12px 0;
            margin-bottom: 20px;
        }

        .nav-section-title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-secondary);
            padding: 0 8px;
            margin-bottom: 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-primary);
            text-decoration: none;
        }

        .nav-item:hover {
            background: var(--bg-color);
        }

        .nav-item.active {
            background: #e7f3ff;
            color: var(--primary-color);
        }

        .nav-item i {
            width: 20px;
            text-align: center;
            font-size: 16px;
        }

        .nav-item span {
            font-size: 14px;
            font-weight: 500;
        }

        .nav-item .badge {
            margin-left: auto;
            background: var(--danger-color);
            color: white;
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 10px;
        }

        /* Submenu Styles */
        .nav-item-parent {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-primary);
        }

        .nav-item-parent:hover {
            background: var(--bg-color);
        }

        .nav-item-parent.active {
            background: #e7f3ff;
            color: var(--primary-color);
        }

        .nav-item-parent .nav-item-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .nav-item-parent i.fa-chevron-down {
            font-size: 12px;
            transition: transform 0.3s;
        }

        .nav-item-parent.expanded i.fa-chevron-down {
            transform: rotate(180deg);
        }

        .submenu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: #f8f9fa;
            border-radius: 0 0 8px 8px;
            margin-top: -4px;
        }

        .submenu.open {
            max-height: 500px;
        }

        .submenu-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px 10px 44px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 13px;
        }

        .submenu-item:hover {
            background: #e9ecef;
            color: var(--text-primary);
        }

        .submenu-item.active {
            color: var(--primary-color);
            background: #e7f3ff;
        }

        .submenu-item i {
            font-size: 12px;
            width: 16px;
            text-align: center;
        }

        .submenu-item .submenu-badge {
            margin-left: auto;
            background: var(--primary-color);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
        }

        .submenu-item .submenu-badge.warning {
            background: var(--warning-color);
        }

        .submenu-item .submenu-badge.danger {
            background: var(--danger-color);
        }

        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: var(--card-bg);
            padding: 16px 24px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .header-left h2 {
            font-size: 20px;
            font-weight: 600;
        }

        .header-left p {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .header-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }

        .header-icon:hover {
            background: #e4e6e9;
        }

        .header-icon .notification-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--danger-color);
            color: white;
            font-size: 10px;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
        }

        /* Account Switcher Dropdown */
        .account-switcher {
            position: relative;
        }

        .account-switcher-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 240px;
        }

        .account-switcher-btn:hover {
            border-color: var(--primary-color);
            background: #f8f9fa;
        }

        .account-switcher-btn .account-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: linear-gradient(135deg, #1877f2, #42b72a);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
        }

        .account-switcher-btn .account-info {
            flex: 1;
            text-align: left;
        }

        .account-switcher-btn .account-label {
            font-size: 11px;
            color: var(--text-secondary);
            text-transform: uppercase;
            font-weight: 500;
        }

        .account-switcher-btn .account-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            white-space: nowrap;
        }

        .account-switcher-btn .chevron {
            color: var(--text-secondary);
            transition: transform 0.2s;
        }

        .account-switcher-btn.open .chevron {
            transform: rotate(180deg);
        }

        .account-dropdown {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            min-width: 280px;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 200;
            display: none;
            overflow: hidden;
        }

        .account-dropdown.show {
            display: block;
        }

        .account-dropdown-header {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-color);
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        .account-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .account-option:hover {
            background: #f8f9fa;
        }

        .account-option.active {
            background: #e7f3ff;
        }

        .account-option .option-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
        }

        .account-option .option-icon.connect {
            background: linear-gradient(135deg, #1877f2, #42b72a);
        }

        .account-option .option-icon.chatflow {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
        }

        .account-option .option-icon.psb {
            background: linear-gradient(135deg, #f59e0b, #ef4444);
        }

        .account-option .option-icon.email {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .account-option .option-info {
            flex: 1;
            min-width: 0;
        }

        .account-option .option-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            white-space: nowrap;
        }

        .account-option .option-status {
            font-size: 12px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }

        .account-option .option-status .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--success-color);
        }

        .account-option .check-icon {
            color: var(--primary-color);
            font-size: 16px;
            opacity: 0;
        }

        .account-option.active .check-icon {
            opacity: 1;
        }

        /* Tabs */
        .tabs-container {
            display: flex;
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 20px;
            gap: 0;
        }

        .tab-btn {
            padding: 12px 24px;
            background: none;
            border: none;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab-btn:hover {
            color: var(--text-primary);
            background: #f8f9fa;
        }

        .tab-btn.active {
            color: var(--primary-color);
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary-color);
        }

        .tab-btn .tab-badge {
            background: var(--danger-color);
            color: white;
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 10px;
        }

        .tab-btn .tab-badge.success {
            background: var(--success-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Dashboard Sections - Hidden by default, shown when active */
        .dashboard-section {
            display: none;
        }

        .dashboard-section.active {
            display: block;
        }

        /* For metrics grid which uses CSS Grid */
        .metrics-grid.dashboard-section.active {
            display: grid;
        }

        /* Section Page Title */
        .section-page-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 24px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-page-title i {
            color: var(--primary-color);
        }

        /* Resolved Alerts */
        .alert-item.resolved {
            opacity: 0.8;
        }

        .resolution-note {
            margin-top: 10px;
            padding: 10px;
            background: #f0f9f4;
            border-left: 3px solid var(--success-color);
            border-radius: 4px;
            font-size: 13px;
        }

        /* History Filters */
        .history-filters {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .history-table {
            font-size: 13px;
        }

        .alert-type-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .alert-type-badge.danger {
            background: #ffe0e0;
            color: var(--danger-color);
        }

        .alert-type-badge.warning {
            background: #fff3e0;
            color: #e67e22;
        }

        .alert-type-badge.success {
            background: #e0f7e9;
            color: var(--success-color);
        }

        /* Configure Alerts */
        .config-section {
            background: var(--bg-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .config-section h4 {
            margin-bottom: 16px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .config-section h4 i {
            color: var(--primary-color);
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .config-grid.full-width {
            grid-template-columns: 1fr;
        }

        .config-item label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .config-input-group {
            position: relative;
        }

        .config-input-group .currency {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 14px;
        }

        .config-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 14px;
            background: white;
        }

        .config-input-group .currency + .config-input {
            padding-left: 28px;
        }

        .config-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(24, 119, 242, 0.1);
        }

        .config-input.full {
            width: 100%;
        }

        .input-help {
            display: block;
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 6px;
        }

        .config-toggles {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .toggle-item {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .toggle-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary-color);
        }

        .toggle-label {
            font-size: 13px;
            color: var(--text-primary);
        }

        .config-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.2s;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: white;
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            background: var(--bg-color);
        }

        /* Filter Bar */
        .filter-bar {
            background: var(--card-bg);
            padding: 16px 24px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-group label {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .filter-select {
            padding: 8px 32px 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 14px;
            background: white url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2365676b' d='M6 8L1 3h10z'/%3E%3C/svg%3E") no-repeat right 10px center;
            appearance: none;
            cursor: pointer;
            min-width: 150px;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .refresh-btn {
            padding: 8px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
        }

        .refresh-btn:hover {
            background: var(--primary-dark);
        }

        .last-sync {
            font-size: 12px;
            color: var(--text-secondary);
            margin-left: auto;
        }

        /* Dashboard Content */
        .dashboard-content {
            padding: 24px;
        }

        /* Section scroll offset for sticky header */
        [id$="-section"] {
            scroll-margin-top: 140px;
        }

        /* Metrics Cards */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .metric-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        .metric-card .metric-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .metric-card .metric-label {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .metric-card .metric-label .info-icon {
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 12px;
        }

        .metric-card .metric-label .info-icon:hover {
            color: var(--primary-color);
        }

        .metric-card .metric-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .metric-card .metric-icon.blue {
            background: #e7f3ff;
            color: var(--primary-color);
        }

        .metric-card .metric-icon.green {
            background: #e6f7f1;
            color: var(--success-color);
        }

        .metric-card .metric-icon.orange {
            background: #fff4e5;
            color: var(--warning-color);
        }

        .metric-card .metric-icon.purple {
            background: #f3e8ff;
            color: #9333ea;
        }

        .metric-card .metric-icon.red {
            background: #fde8e8;
            color: var(--danger-color);
        }

        .metric-card .metric-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .metric-card .metric-change {
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .metric-card .metric-change.positive {
            color: var(--success-color);
        }

        .metric-card .metric-change.negative {
            color: var(--danger-color);
        }

        /* Pixel Status Card */
        .pixel-status {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pixel-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .pixel-dot.active {
            background: var(--success-color);
        }

        .pixel-dot.inactive {
            background: var(--danger-color);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Tables */
        .table-section {
            background: var(--card-bg);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            margin-bottom: 24px;
            overflow: hidden;
        }

        .table-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: flex-start;
            align-items: center;
            gap: 16px;
        }

        .table-header h3 {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .table-header h3 .count {
            background: var(--bg-color);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .table-filter {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .table-status-filter {
            padding: 7px 14px 7px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: var(--card-bg);
            color: var(--text-primary);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            min-width: 100px;
            transition: all 0.2s ease;
            border-left-width: 3px;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            padding-right: 30px;
        }

        .table-status-filter:hover {
            border-color: #9ca3af;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        .table-status-filter:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.15);
        }

        /* Active filter state - Green left border accent */
        .table-status-filter.filter-active {
            background: var(--card-bg);
            border-left-color: #22c55e;
            color: var(--text-primary);
        }

        .table-status-filter.filter-active::before {
            background: #22c55e;
        }

        /* Paused filter state - Orange left border accent */
        .table-status-filter.filter-paused {
            background: var(--card-bg);
            border-left-color: #f59e0b;
            color: var(--text-primary);
        }

        /* All filter state - Blue left border accent */
        .table-status-filter.filter-all {
            background: var(--card-bg);
            border-left-color: #3b82f6;
            color: var(--text-primary);
        }

        .table-actions {
            display: flex;
            gap: 8px;
        }

        .table-btn {
            padding: 6px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: white;
            font-size: 13px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
        }

        .table-btn:hover {
            background: var(--bg-color);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            text-align: left;
            padding: 12px 16px;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            background: #fafbfc;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            user-select: none;
            white-space: nowrap;
        }

        .data-table th:hover {
            background: #f0f2f5;
        }

        .data-table th .sort-icon {
            margin-left: 4px;
            opacity: 0.5;
        }

        .data-table th.sorted .sort-icon {
            opacity: 1;
            color: var(--primary-color);
        }

        .data-table td {
            padding: 14px 16px;
            font-size: 14px;
            border-bottom: 1px solid var(--border-color);
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .data-table tr:hover {
            background: #fafbfc;
        }

        .data-table .name-cell {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .data-table .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .data-table .status-badge.active {
            background: #e6f7f1;
            color: var(--success-color);
        }

        .data-table .status-badge.paused {
            background: #fff4e5;
            color: var(--warning-color);
        }

        .data-table .roas-value {
            font-weight: 600;
        }

        .data-table .roas-value.good {
            color: var(--success-color);
        }

        .data-table .roas-value.warning {
            color: var(--warning-color);
        }

        .data-table .roas-value.bad {
            color: var(--danger-color);
        }

        .data-table .action-btn {
            padding: 6px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .data-table .action-btn.view {
            background: #e7f3ff;
            color: var(--primary-color);
        }

        .data-table .action-btn.view:hover {
            background: #d0e8ff;
        }

        /* Creative Thumbnail with Hover Preview */
        .creative-thumbnail {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .creative-thumbnail:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border-color: var(--primary-color);
        }

        .creative-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Creative Preview Modal */
        .creative-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
        }

        .creative-modal.show {
            display: flex;
        }

        .creative-modal-content {
            position: relative;
            max-width: 500px;
            max-height: 80vh;
            background: white;
            border-radius: 12px;
            padding: 8px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .creative-modal-content img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            display: block;
        }

        .creative-modal-close {
            position: absolute;
            top: -12px;
            right: -12px;
            width: 32px;
            height: 32px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .creative-modal-close:hover {
            background: var(--danger-color);
            color: white;
        }

        /* Table Pagination - Professional Style */
        .table-pagination {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 24px;
            padding: 16px 20px;
            border-top: 1px solid var(--border-color);
            background: #fafbfc;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .pagination-left,
        .pagination-center,
        .pagination-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pagination-select {
            padding: 4px 8px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background: white;
            font-size: 13px;
            color: var(--text-primary);
            cursor: pointer;
        }

        .pagination-select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .pagination-input {
            width: 40px;
            padding: 4px 8px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            text-align: center;
            font-size: 13px;
            color: var(--text-primary);
        }

        .pagination-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .pagination-input::-webkit-outer-spin-button,
        .pagination-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .pagination-arrow {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-secondary);
        }

        .pagination-arrow:hover:not(:disabled) {
            background: var(--bg-color);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .pagination-arrow:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* Task Management System */
        .task-tabs {
            display: flex;
            gap: 0;
            border-bottom: 1px solid var(--border-color);
            background: var(--card-bg);
        }

        .task-tab {
            padding: 14px 24px;
            border: none;
            background: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .task-tab:hover {
            color: var(--text-color);
            background: var(--bg-color);
        }

        .task-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .task-tab .tab-count {
            background: var(--bg-color);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 600;
        }

        .task-tab.active .tab-count {
            background: rgba(24, 119, 242, 0.1);
            color: var(--primary-color);
        }

        .task-content {
            display: none;
        }

        .task-content.active {
            display: block;
        }

        .task-list {
            padding: 0;
        }

        .task-item {
            border-bottom: 1px solid var(--border-color);
            background: var(--card-bg);
            transition: background 0.2s;
        }

        .task-item:hover {
            background: var(--bg-color);
        }

        .task-item-header {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            gap: 16px;
            cursor: pointer;
        }

        .task-priority {
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            min-width: 70px;
            text-align: center;
        }

        .task-priority.critical {
            background: #fef2f2;
            color: #dc2626;
        }

        .task-priority.warning {
            background: #fff7ed;
            color: #f97316;
        }

        .task-priority.opportunity {
            background: #f0fdf4;
            color: #22c55e;
        }

        .task-info {
            flex: 1;
            min-width: 0;
        }

        .task-title {
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .task-title .task-type {
            font-size: 11px;
            color: var(--text-secondary);
            font-weight: 500;
            background: var(--bg-color);
            padding: 2px 6px;
            border-radius: 3px;
        }

        .task-meta {
            display: flex;
            gap: 20px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .task-meta span {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .task-metrics {
            display: flex;
            gap: 24px;
            font-size: 13px;
        }

        .task-metric {
            text-align: right;
        }

        .task-metric-label {
            color: var(--text-secondary);
            font-size: 11px;
            margin-bottom: 2px;
        }

        .task-metric-value {
            font-weight: 600;
            color: var(--text-color);
        }

        .task-status-select {
            padding: 6px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 12px;
            background: white;
            cursor: pointer;
            min-width: 100px;
        }

        .task-status-select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .task-expand-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: none;
            cursor: pointer;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .task-expand-btn:hover {
            background: var(--bg-color);
            color: var(--primary-color);
        }

        .task-expand-btn i {
            transition: transform 0.2s;
        }

        .task-item.expanded .task-expand-btn i {
            transform: rotate(180deg);
        }

        .task-details {
            display: none;
            padding: 0 20px 20px 20px;
            margin-left: 106px;
            border-top: 1px solid var(--border-color);
            background: var(--bg-color);
        }

        .task-item.expanded .task-details {
            display: block;
        }

        .task-details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding-top: 16px;
        }

        .task-detail-section h4 {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            margin-bottom: 12px;
        }

        .task-threshold-info {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
        }

        .task-threshold-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            font-size: 13px;
        }

        .task-threshold-row:not(:last-child) {
            border-bottom: 1px solid var(--border-color);
        }

        .task-comments {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
        }

        .task-comment {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .task-comment:last-child {
            border-bottom: none;
        }

        .task-comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 6px;
            font-size: 12px;
        }

        .task-comment-author {
            font-weight: 600;
            color: var(--text-color);
        }

        .task-comment-time {
            color: var(--text-secondary);
        }

        .task-comment-text {
            font-size: 13px;
            color: var(--text-color);
            line-height: 1.5;
        }

        .task-add-comment {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        .task-comment-input {
            flex: 1;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 13px;
            resize: none;
        }

        .task-comment-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .task-comment-btn {
            padding: 10px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
        }

        .task-comment-btn:hover {
            background: #1565c0;
        }

        .task-actions-row {
            display: flex;
            gap: 8px;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        .task-action-btn {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: white;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
        }

        .task-action-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .task-action-btn.primary {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .task-action-btn.primary:hover {
            background: #1565c0;
        }

        .task-action-btn.danger {
            color: #dc2626;
            border-color: #dc2626;
        }

        .task-action-btn.danger:hover {
            background: #fef2f2;
        }

        .no-tasks {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .no-tasks i {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.3;
        }

        .no-tasks p {
            font-size: 14px;
        }

        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            position: relative;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-height: 90vh;
            overflow: hidden;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: var(--bg-color);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: #fee2e2;
            color: #dc2626;
        }

        .modal-body {
            overflow-y: auto;
            max-height: calc(90vh - 140px);
        }

        /* Action Menu (Three Dots) */
        .action-menu {
            position: relative;
            display: inline-block;
        }

        .action-menu-btn {
            width: 32px;
            height: 32px;
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .action-menu-btn:hover {
            background: var(--bg-color);
            color: var(--text-color);
        }

        .action-menu-dropdown {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            min-width: 120px;
            z-index: 100;
            overflow: hidden;
        }

        .action-menu.open .action-menu-dropdown {
            display: block;
        }

        .action-menu-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            font-size: 13px;
            color: var(--text-color);
            cursor: pointer;
            transition: background 0.2s;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
        }

        .action-menu-item:hover {
            background: var(--bg-color);
        }

        .action-menu-item.delete {
            color: #dc2626;
        }

        .action-menu-item.delete:hover {
            background: #fef2f2;
        }

        /* Ad Preview Tooltip */
        .ad-name {
            position: relative;
            cursor: pointer;
            color: var(--primary-color);
        }

        .ad-name:hover .ad-preview {
            display: block;
        }

        .ad-preview {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 100;
            width: 250px;
        }

        .ad-preview img {
            width: 100%;
            height: 140px;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 8px;
            background: var(--bg-color);
        }

        .ad-preview .ad-info {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Country Section */
        .country-flag {
            width: 24px;
            height: 18px;
            border-radius: 2px;
            object-fit: cover;
        }

        /* Alerts Section */
        .alerts-panel {
            background: var(--card-bg);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            margin-bottom: 24px;
        }

        .alert-item {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .alert-item:last-child {
            border-bottom: none;
        }

        .alert-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .alert-icon.warning {
            background: #fff4e5;
            color: var(--warning-color);
        }

        .alert-icon.danger {
            background: #fde8e8;
            color: var(--danger-color);
        }

        .alert-icon.success {
            background: #e6f7f1;
            color: var(--success-color);
        }

        .alert-content {
            flex: 1;
        }

        .alert-content h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .alert-content p {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .alert-meta {
            font-size: 12px;
            color: var(--text-secondary);
            display: flex;
            gap: 16px;
        }

        .alert-actions {
            display: flex;
            gap: 8px;
        }

        .alert-btn {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .alert-btn.primary {
            background: var(--primary-color);
            color: white;
            border: none;
        }

        .alert-btn.primary:hover {
            background: var(--primary-dark);
        }

        .alert-btn.secondary {
            background: white;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .alert-btn.secondary:hover {
            background: var(--bg-color);
        }

        /* Notification Panel */
        .notification-panel {
            position: fixed;
            top: 60px;
            right: 24px;
            width: 380px;
            max-height: 500px;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            border: 1px solid var(--border-color);
            z-index: 200;
            display: none;
            overflow: hidden;
        }

        .notification-panel.show {
            display: block;
        }

        .notification-header {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-header h3 {
            font-size: 16px;
            font-weight: 600;
        }

        .mark-all-read {
            font-size: 13px;
            color: var(--primary-color);
            cursor: pointer;
        }

        .notification-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .notification-item {
            padding: 14px 16px;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s;
        }

        .notification-item:hover {
            background: #fafbfc;
        }

        .notification-item.unread {
            background: #f0f7ff;
        }

        .notification-item .notif-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
        }

        .notification-item .notif-icon.sale {
            background: #e6f7f1;
            color: var(--success-color);
        }

        .notification-item .notif-icon.alert {
            background: #fde8e8;
            color: var(--danger-color);
        }

        .notification-item .notif-title {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .notification-item .notif-desc {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .notification-item .notif-time {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* Charts Section */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
            margin-bottom: 24px;
        }

        .chart-card {
            background: var(--card-bg);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            padding: 20px;
        }

        .chart-card h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .chart-placeholder {
            height: 200px;
            background: var(--bg-color);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 220px;
            background-color: #333;
            color: #fff;
            text-align: left;
            padding: 10px 12px;
            border-radius: 6px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: 400;
            line-height: 1.5;
        }

        .tooltip .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Name with tooltip - for Ad Sets and Ads tables */
        .name-with-tooltip {
            position: relative;
            cursor: pointer;
        }

        .name-with-tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 0;
            background-color: #1a1a2e;
            color: #fff;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 400;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s, visibility 0.2s;
            z-index: 1000;
            margin-bottom: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .name-with-tooltip::before {
            content: "";
            position: absolute;
            bottom: 100%;
            left: 20px;
            border-width: 6px;
            border-style: solid;
            border-color: #1a1a2e transparent transparent transparent;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s, visibility 0.2s;
            z-index: 1001;
            margin-bottom: -4px;
        }

        .name-with-tooltip:hover::after,
        .name-with-tooltip:hover::before {
            opacity: 1;
            visibility: visible;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .metrics-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .metrics-grid {
                grid-template-columns: 1fr;
            }

            .filter-bar {
                flex-direction: column;
                align-items: stretch;
            }

            .filter-group {
                flex-direction: column;
                align-items: stretch;
            }

            .last-sync {
                margin-left: 0;
                margin-top: 8px;
            }

            .data-table {
                display: block;
                overflow-x: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <h1><i class="fab fa-facebook"></i> Ads Dashboard</h1>
        </div>

        <nav class="nav-section">
            <div class="nav-section-title">Menu</div>

            <!-- Dashboard with Submenu -->
            <div class="nav-menu-group">
                <div class="nav-item-parent active expanded" onclick="toggleSubmenu(this)">
                    <div class="nav-item-left">
                        <i class="fas fa-chart-line"></i>
                        <span>Dashboard</span>
                    </div>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="submenu open">
                    <a href="javascript:void(0)" class="submenu-item active" onclick="showSection('metrics-section', this)">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Overview Metrics</span>
                    </a>
                    <a href="javascript:void(0)" class="submenu-item" onclick="showSection('campaigns-section', this)">
                        <i class="fas fa-bullhorn"></i>
                        <span>Campaigns</span>
                    </a>
                    <a href="javascript:void(0)" class="submenu-item" onclick="showSection('adsets-section', this)">
                        <i class="fas fa-layer-group"></i>
                        <span>Ad Sets</span>
                    </a>
                    <a href="javascript:void(0)" class="submenu-item" onclick="showSection('ads-section', this)">
                        <i class="fas fa-ad"></i>
                        <span>Ads</span>
                    </a>
                    <a href="javascript:void(0)" class="submenu-item" onclick="showSection('country-section', this)">
                        <i class="fas fa-globe"></i>
                        <span>Country Performance</span>
                    </a>
                    <a href="javascript:void(0)" class="submenu-item" onclick="showSection('sales-creative-section', this)">
                        <i class="fas fa-palette"></i>
                        <span>Sales by Ad Creative</span>
                    </a>
                </div>
            </div>

            <!-- Alerts - Simple Link -->
            <a href="javascript:void(0)" class="nav-item" onclick="showSection('alerts-section', this)">
                <i class="fas fa-bell"></i>
                <span>Alerts</span>
                <span class="badge">3</span>
            </a>

            <!-- Data Management with Submenu -->
            <div class="nav-menu-group">
                <div class="nav-item-parent" onclick="toggleSubmenu(this)">
                    <div class="nav-item-left">
                        <i class="fas fa-database"></i>
                        <span>Data Management</span>
                    </div>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="submenu">
                    <a href="javascript:void(0)" class="submenu-item" onclick="showSection('pabbly-revenue-section', this)">
                        <i class="fas fa-dollar-sign"></i>
                        <span>Pabbly Revenue Data</span>
                    </a>
                    <a href="javascript:void(0)" class="submenu-item" onclick="showSection('leads-data-section', this)">
                        <i class="fas fa-user-plus"></i>
                        <span>Leads Data</span>
                    </a>
                </div>
            </div>
        </nav>

        <nav class="nav-section">
            <div class="nav-section-title">Settings</div>

            <!-- Settings with Submenu -->
            <div class="nav-menu-group">
                <div class="nav-item-parent" onclick="toggleSubmenu(this)">
                    <div class="nav-item-left">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </div>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="submenu">
                    <a href="javascript:void(0)" class="submenu-item" onclick="showSection('facebook-connection-section', this)">
                        <i class="fab fa-facebook"></i>
                        <span>Facebook Connection</span>
                    </a>
                    <a href="javascript:void(0)" class="submenu-item" onclick="showSection('webhooks-section', this)">
                        <i class="fas fa-plug"></i>
                        <span>Webhooks</span>
                    </a>
                    <a href="javascript:void(0)" class="submenu-item" onclick="showSection('alert-thresholds-section', this)">
                        <i class="fas fa-bell"></i>
                        <span>Alert & Budget Settings</span>
                    </a>
                    <a href="javascript:void(0)" class="submenu-item" onclick="showSection('user-management-section', this)">
                        <i class="fas fa-user-cog"></i>
                        <span>User Management</span>
                    </a>
                </div>
            </div>
        </nav>

        <nav class="nav-section">
            <div class="nav-section-title">Help</div>

            <!-- Best Practices (SOP) - Simple Link -->
            <a href="#" class="nav-item">
                <i class="fas fa-book"></i>
                <span>Best Practices (SOP)</span>
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <!-- Account Switcher Dropdown -->
                <div class="account-switcher">
                    <div class="account-switcher-btn" onclick="toggleAccountDropdown()">
                        <div class="account-icon">
                            <i class="fas fa-plug"></i>
                        </div>
                        <div class="account-info">
                            <div class="account-label">Ad Account</div>
                            <div class="account-name" id="currentAccountName">Pabbly Connect</div>
                        </div>
                        <i class="fas fa-chevron-down chevron"></i>
                    </div>
                    <div class="account-dropdown" id="accountDropdown">
                        <div class="account-dropdown-header">Switch Ad Account</div>
                        <div class="account-option active" onclick="switchAccount('Pabbly Connect', 'connect')">
                            <div class="option-icon connect">
                                <i class="fas fa-plug"></i>
                            </div>
                            <div class="option-info">
                                <div class="option-name">Pabbly Connect</div>
                                <div class="option-status">
                                    <span class="status-dot"></span>
                                    Active  5 Campaigns
                                </div>
                            </div>
                            <i class="fas fa-check check-icon"></i>
                        </div>
                        <div class="account-option" onclick="switchAccount('Pabbly Chatflow', 'chatflow')">
                            <div class="option-icon chatflow">
                                <i class="fas fa-comments"></i>
                            </div>
                            <div class="option-info">
                                <div class="option-name">Pabbly Chatflow</div>
                                <div class="option-status">
                                    <span class="status-dot"></span>
                                    Active  3 Campaigns
                                </div>
                            </div>
                            <i class="fas fa-check check-icon"></i>
                        </div>
                        <div class="account-option" onclick="switchAccount('Pabbly Email Marketing', 'email')">
                            <div class="option-icon email">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="option-info">
                                <div class="option-name">Pabbly Email Marketing</div>
                                <div class="option-status">
                                    <span class="status-dot"></span>
                                    Active  2 Campaigns
                                </div>
                            </div>
                            <i class="fas fa-check check-icon"></i>
                        </div>
                        <div class="account-option" onclick="switchAccount('Pabbly PSB', 'psb')">
                            <div class="option-icon psb">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <div class="option-info">
                                <div class="option-name">Pabbly PSB</div>
                                <div class="option-status">
                                    <span class="status-dot"></span>
                                    Active  4 Campaigns
                                </div>
                            </div>
                            <i class="fas fa-check check-icon"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <div class="header-icon" onclick="toggleNotifications()">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge">5</span>
                </div>
                <div class="header-icon">
                    <i class="fas fa-question-circle"></i>
                </div>
                <div class="user-avatar">JD</div>
            </div>
        </header>

        <!-- Notification Panel -->
        <div class="notification-panel" id="notificationPanel">
            <div class="notification-header">
                <h3>Notifications</h3>
                <span class="mark-all-read">Mark all as read</span>
            </div>
            <div class="notification-list">
                <div class="notification-item unread">
                    <div class="notif-icon sale">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="notif-title">New Sale Generated!</div>
                    <div class="notif-desc">Campaign "USA - Lifetime Deal" - $700</div>
                    <div class="notif-time">2 minutes ago</div>
                </div>
                <div class="notification-item unread">
                    <div class="notif-icon alert">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="notif-title">Alert: Low ROAS Detected</div>
                    <div class="notif-desc">Campaign "UK - Retargeting" ROAS: 0.6</div>
                    <div class="notif-time">15 minutes ago</div>
                </div>
                <div class="notification-item">
                    <div class="notif-icon sale">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="notif-title">New Sale Generated!</div>
                    <div class="notif-desc">Campaign "India - Tech" - $700</div>
                    <div class="notif-time">1 hour ago</div>
                </div>
                <div class="notification-item">
                    <div class="notif-icon sale">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="notif-title">Budget Increase Recommended</div>
                    <div class="notif-desc">Campaign "USA - Lifetime Deal" ROAS: 2.5</div>
                    <div class="notif-time">3 hours ago</div>
                </div>
            </div>
        </div>

        <!-- Filter Bar -->
        <div class="filter-bar">
            <div class="filter-group">
                <label>Time Range:</label>
                <select class="filter-select">
                    <option value="7">Last 7 Days</option>
                    <option value="14">Last 14 Days</option>
                    <option value="30" selected>Last 30 Days</option>
                    <option value="60">Last 60 Days</option>
                    <option value="90">Last 90 Days</option>
                    <option value="custom">Custom Range</option>
                </select>
            </div>
            <button class="refresh-btn">
                <i class="fas fa-sync-alt"></i>
                Refresh Data
            </button>
            <span class="last-sync">Last synced: 5 minutes ago</span>
        </div>

        <!-- Dashboard Content -->
        <div class="dashboard-content">
            <!-- Metrics Cards -->
            <div id="metrics-section" class="metrics-grid dashboard-section active">
                <div class="metric-card">
                    <div class="metric-header">
                        <span class="metric-label">
                            Total Ad Spend
                            <span class="tooltip">
                                <i class="fas fa-info-circle info-icon"></i>
                                <span class="tooltip-text">Total amount spent on Facebook ads in the selected time period. Data from Facebook Marketing API.</span>
                            </span>
                        </span>
                        <div class="metric-icon blue">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                    </div>
                    <div class="metric-value">$12,450</div>
                    <div class="metric-change positive">
                        <i class="fas fa-arrow-up"></i> 12.5% vs last period
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-header">
                        <span class="metric-label">
                            Total Revenue
                            <span class="tooltip">
                                <i class="fas fa-info-circle info-icon"></i>
                                <span class="tooltip-text">Actual revenue from Pabbly Subscription Billing. This is REAL money received, not Facebook pixel estimates.</span>
                            </span>
                        </span>
                        <div class="metric-icon green">
                            <i class="fas fa-coins"></i>
                        </div>
                    </div>
                    <div class="metric-value">$18,900</div>
                    <div class="metric-change positive">
                        <i class="fas fa-arrow-up"></i> 23.4% vs last period
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-header">
                        <span class="metric-label">
                            True ROAS
                            <span class="tooltip">
                                <i class="fas fa-info-circle info-icon"></i>
                                <span class="tooltip-text">Pabbly Revenue  Facebook Ad Spend. This shows your TRUE business ROAS based on actual sales. Target: Above 1.5</span>
                            </span>
                        </span>
                        <div class="metric-icon green">
                            <i class="fas fa-chart-line"></i>
                        </div>
                    </div>
                    <div class="metric-value" style="color: var(--success-color);">1.52</div>
                    <div class="metric-change positive">
                        <i class="fas fa-arrow-up"></i> 8.2% vs last period
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-header">
                        <span class="metric-label">
                            Total Sales
                            <span class="tooltip">
                                <i class="fas fa-info-circle info-icon"></i>
                                <span class="tooltip-text">Actual sales count from Pabbly. This is the real number of purchases, not Facebook pixel data.</span>
                            </span>
                        </span>
                        <div class="metric-icon blue">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                    </div>
                    <div class="metric-value">27</div>
                    <div class="metric-change positive">
                        <i class="fas fa-arrow-up"></i> 5 more than last period
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-header">
                        <span class="metric-label">
                            Total Leads
                            <span class="tooltip">
                                <i class="fas fa-info-circle info-icon"></i>
                                <span class="tooltip-text">Total leads captured via CRM integration. Avg CPL = Total Ad Spend  Total Leads.</span>
                            </span>
                        </span>
                        <div class="metric-icon orange">
                            <i class="fas fa-user-plus"></i>
                        </div>
                    </div>
                    <div class="metric-value" id="total-leads-value">234</div>
                    <div class="metric-sub" style="font-size: 14px; color: var(--text-secondary); margin-top: 4px;">
                        Avg. CPL: <span id="cpl-value" style="font-weight: 600; color: var(--text-primary);">$52.76</span>
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-header">
                        <span class="metric-label">
                            Pixel Status
                            <span class="tooltip">
                                <i class="fas fa-info-circle info-icon"></i>
                                <span class="tooltip-text">Shows whether Facebook Pixel is active on your landing pages. Checked every hour.</span>
                            </span>
                        </span>
                        <div class="metric-icon green">
                            <i class="fas fa-check-circle"></i>
                        </div>
                    </div>
                    <div class="pixel-status">
                        <span class="pixel-dot active"></span>
                        <span style="font-size: 18px; font-weight: 600;">Active</span>
                    </div>
                    <div class="metric-change" style="color: var(--text-secondary);">
                        Last checked: 15 min ago
                    </div>
                </div>
            </div>

            <!-- Alerts Section with Tabs -->
            <div id="alerts-section" class="table-section dashboard-section">
                <div class="table-header">
                    <h3><i class="fas fa-bell"></i> Alerts <span class="count">7 Open</span></h3>
                </div>

                <!-- Task Tabs -->
                <div class="task-tabs">
                    <button class="task-tab active" onclick="switchTaskTab('needs-action')">
                        <i class="fas fa-exclamation-circle"></i>
                        Needs Action
                        <span class="tab-count">5</span>
                    </button>
                    <button class="task-tab" onclick="switchTaskTab('opportunities')">
                        <i class="fas fa-arrow-trend-up"></i>
                        Opportunities
                        <span class="tab-count">2</span>
                    </button>
                </div>

                <!-- Needs Action Tab Content -->
                <div id="needs-action" class="task-content active">
                    <div class="task-list">
                        <!-- Task 1 - Critical -->
                        <div class="task-item" data-task-id="1">
                            <div class="task-item-header" onclick="toggleTask(this)">
                                <span class="task-priority critical">Critical</span>
                                <div class="task-info">
                                    <div class="task-title">
                                        UK - Retargeting
                                        <span class="task-type">Campaign</span>
                                    </div>
                                    <div class="task-meta">
                                        <span><i class="fas fa-exclamation-triangle"></i> Low ROAS - Below threshold</span>
                                        <span><i class="fas fa-clock"></i> 4 days ago</span>
                                    </div>
                                </div>
                                <div class="task-metrics">
                                    <div class="task-metric">
                                        <div class="task-metric-label">Spend</div>
                                        <div class="task-metric-value">$2,847</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">Sales</div>
                                        <div class="task-metric-value">$980</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">ROAS</div>
                                        <div class="task-metric-value" style="color: #dc2626;">0.34</div>
                                    </div>
                                </div>
                                <select class="task-status-select" onclick="event.stopPropagation()">
                                    <option value="open" selected>Open</option>
                                    <option value="on-hold">On Hold</option>
                                    <option value="resolved">Resolved</option>
                                </select>
                                <button class="task-expand-btn">
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                            </div>
                            <div class="task-details">
                                <div class="task-details-grid">
                                    <div class="task-detail-section">
                                        <h4>Threshold Details</h4>
                                        <div class="task-threshold-info">
                                            <div class="task-threshold-row">
                                                <span>Spend Threshold</span>
                                                <span><strong>$700.00</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Current Spend</span>
                                                <span style="color: #dc2626;"><strong>$2,847.00</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Target ROAS</span>
                                                <span><strong>1.0</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Current ROAS</span>
                                                <span style="color: #dc2626;"><strong>0.34</strong></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="task-detail-section">
                                        <h4>Comments</h4>
                                        <div class="task-comments">
                                            <div class="task-comment">
                                                <div class="task-comment-header">
                                                    <span class="task-comment-author">John D.</span>
                                                    <span class="task-comment-time">2 days ago</span>
                                                </div>
                                                <div class="task-comment-text">Checked the ad creatives. Will try new targeting options.</div>
                                            </div>
                                            <div class="task-comment">
                                                <div class="task-comment-header">
                                                    <span class="task-comment-author">System</span>
                                                    <span class="task-comment-time">4 days ago</span>
                                                </div>
                                                <div class="task-comment-text">Task created: Campaign exceeded $700 spend threshold with ROAS below 1.0</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="task-add-comment">
                                    <input type="text" class="task-comment-input" placeholder="Add a comment...">
                                    <button class="task-comment-btn">Add</button>
                                </div>
                                <div class="task-actions-row">
                                    <button class="task-action-btn danger"><i class="fas fa-pause"></i> Pause Campaign</button>
                                    <button class="task-action-btn"><i class="fas fa-external-link-alt"></i> View in Facebook</button>
                                    <button class="task-action-btn primary" style="margin-left: auto;"><i class="fas fa-check"></i> Mark Resolved</button>
                                </div>
                            </div>
                        </div>

                        <!-- Task 2 - Critical -->
                        <div class="task-item" data-task-id="2">
                            <div class="task-item-header" onclick="toggleTask(this)">
                                <span class="task-priority critical">Critical</span>
                                <div class="task-info">
                                    <div class="task-title">
                                        United Kingdom
                                        <span class="task-type">Country</span>
                                    </div>
                                    <div class="task-meta">
                                        <span><i class="fas fa-times-circle"></i> No sales after threshold spend</span>
                                        <span><i class="fas fa-clock"></i> 3 days ago</span>
                                    </div>
                                </div>
                                <div class="task-metrics">
                                    <div class="task-metric">
                                        <div class="task-metric-label">Spend</div>
                                        <div class="task-metric-value">$1,240</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">Sales</div>
                                        <div class="task-metric-value" style="color: #dc2626;">$0</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">ROAS</div>
                                        <div class="task-metric-value" style="color: #dc2626;">0.00</div>
                                    </div>
                                </div>
                                <select class="task-status-select" onclick="event.stopPropagation()">
                                    <option value="open" selected>Open</option>
                                    <option value="on-hold">On Hold</option>
                                    <option value="resolved">Resolved</option>
                                </select>
                                <button class="task-expand-btn">
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                            </div>
                            <div class="task-details">
                                <div class="task-details-grid">
                                    <div class="task-detail-section">
                                        <h4>Threshold Details</h4>
                                        <div class="task-threshold-info">
                                            <div class="task-threshold-row">
                                                <span>Spend Threshold</span>
                                                <span><strong>$700.00</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Current Spend</span>
                                                <span style="color: #dc2626;"><strong>$1,240.00</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Target ROAS</span>
                                                <span><strong>1.0</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Current ROAS</span>
                                                <span style="color: #dc2626;"><strong>0.00</strong></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="task-detail-section">
                                        <h4>Comments</h4>
                                        <div class="task-comments">
                                            <div class="task-comment">
                                                <div class="task-comment-header">
                                                    <span class="task-comment-author">System</span>
                                                    <span class="task-comment-time">3 days ago</span>
                                                </div>
                                                <div class="task-comment-text">Task created: Country exceeded $700 spend with 0 sales</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="task-add-comment">
                                    <input type="text" class="task-comment-input" placeholder="Add a comment...">
                                    <button class="task-comment-btn">Add</button>
                                </div>
                                <div class="task-actions-row">
                                    <button class="task-action-btn danger"><i class="fas fa-ban"></i> Exclude Country</button>
                                    <button class="task-action-btn"><i class="fas fa-external-link-alt"></i> View in Facebook</button>
                                    <button class="task-action-btn primary" style="margin-left: auto;"><i class="fas fa-check"></i> Mark Resolved</button>
                                </div>
                            </div>
                        </div>

                        <!-- Task 3 - Warning -->
                        <div class="task-item" data-task-id="3">
                            <div class="task-item-header" onclick="toggleTask(this)">
                                <span class="task-priority warning">Warning</span>
                                <div class="task-info">
                                    <div class="task-title">
                                        Interest - Tech Entrepreneurs
                                        <span class="task-type">Ad Set</span>
                                    </div>
                                    <div class="task-meta">
                                        <span><i class="fas fa-chart-line"></i> ROAS below target threshold</span>
                                        <span><i class="fas fa-clock"></i> 1 day ago</span>
                                    </div>
                                </div>
                                <div class="task-metrics">
                                    <div class="task-metric">
                                        <div class="task-metric-label">Spend</div>
                                        <div class="task-metric-value">$920</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">Sales</div>
                                        <div class="task-metric-value">$700</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">ROAS</div>
                                        <div class="task-metric-value" style="color: #f97316;">0.76</div>
                                    </div>
                                </div>
                                <select class="task-status-select" onclick="event.stopPropagation()">
                                    <option value="open" selected>Open</option>
                                    <option value="on-hold">On Hold</option>
                                    <option value="resolved">Resolved</option>
                                </select>
                                <button class="task-expand-btn">
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                            </div>
                            <div class="task-details">
                                <div class="task-details-grid">
                                    <div class="task-detail-section">
                                        <h4>Threshold Details</h4>
                                        <div class="task-threshold-info">
                                            <div class="task-threshold-row">
                                                <span>Spend Threshold</span>
                                                <span><strong>$700.00</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Current Spend</span>
                                                <span style="color: #f97316;"><strong>$920.00</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Target ROAS</span>
                                                <span><strong>1.0</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Current ROAS</span>
                                                <span style="color: #f97316;"><strong>0.76</strong></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="task-detail-section">
                                        <h4>Comments</h4>
                                        <div class="task-comments">
                                            <div class="task-comment">
                                                <div class="task-comment-header">
                                                    <span class="task-comment-author">System</span>
                                                    <span class="task-comment-time">1 day ago</span>
                                                </div>
                                                <div class="task-comment-text">Task created: Ad Set exceeded $700 spend with ROAS 0.76</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="task-add-comment">
                                    <input type="text" class="task-comment-input" placeholder="Add a comment...">
                                    <button class="task-comment-btn">Add</button>
                                </div>
                                <div class="task-actions-row">
                                    <button class="task-action-btn"><i class="fas fa-sliders-h"></i> Adjust Targeting</button>
                                    <button class="task-action-btn"><i class="fas fa-external-link-alt"></i> View in Facebook</button>
                                    <button class="task-action-btn primary" style="margin-left: auto;"><i class="fas fa-check"></i> Mark Resolved</button>
                                </div>
                            </div>
                        </div>

                        <!-- Task 4 - Warning -->
                        <div class="task-item" data-task-id="4">
                            <div class="task-item-header" onclick="toggleTask(this)">
                                <span class="task-priority warning">Warning</span>
                                <div class="task-info">
                                    <div class="task-title">
                                        Video Ad v3 - Feature Demo
                                        <span class="task-type">Ad</span>
                                    </div>
                                    <div class="task-meta">
                                        <span><i class="fas fa-chart-line"></i> ROAS below target threshold</span>
                                        <span><i class="fas fa-clock"></i> 2 hours ago</span>
                                    </div>
                                </div>
                                <div class="task-metrics">
                                    <div class="task-metric">
                                        <div class="task-metric-label">Spend</div>
                                        <div class="task-metric-value">$520</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">Sales</div>
                                        <div class="task-metric-value">$350</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">ROAS</div>
                                        <div class="task-metric-value" style="color: #f97316;">0.67</div>
                                    </div>
                                </div>
                                <select class="task-status-select" onclick="event.stopPropagation()">
                                    <option value="open" selected>Open</option>
                                    <option value="on-hold">On Hold</option>
                                    <option value="resolved">Resolved</option>
                                </select>
                                <button class="task-expand-btn">
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                            </div>
                            <div class="task-details">
                                <div class="task-details-grid">
                                    <div class="task-detail-section">
                                        <h4>Threshold Details</h4>
                                        <div class="task-threshold-info">
                                            <div class="task-threshold-row">
                                                <span>Spend Threshold</span>
                                                <span><strong>$500.00</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Current Spend</span>
                                                <span style="color: #f97316;"><strong>$520.00</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Target ROAS</span>
                                                <span><strong>1.0</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Current ROAS</span>
                                                <span style="color: #f97316;"><strong>0.67</strong></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="task-detail-section">
                                        <h4>Comments</h4>
                                        <div class="task-comments">
                                            <div class="task-comment">
                                                <div class="task-comment-header">
                                                    <span class="task-comment-author">System</span>
                                                    <span class="task-comment-time">2 hours ago</span>
                                                </div>
                                                <div class="task-comment-text">Task created: Ad exceeded $500 spend with ROAS 0.67</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="task-add-comment">
                                    <input type="text" class="task-comment-input" placeholder="Add a comment...">
                                    <button class="task-comment-btn">Add</button>
                                </div>
                                <div class="task-actions-row">
                                    <button class="task-action-btn danger"><i class="fas fa-pause"></i> Pause Ad</button>
                                    <button class="task-action-btn"><i class="fas fa-external-link-alt"></i> View in Facebook</button>
                                    <button class="task-action-btn primary" style="margin-left: auto;"><i class="fas fa-check"></i> Mark Resolved</button>
                                </div>
                            </div>
                        </div>

                        <!-- Task 5 - Warning (On Hold) -->
                        <div class="task-item" data-task-id="5">
                            <div class="task-item-header" onclick="toggleTask(this)">
                                <span class="task-priority warning">Warning</span>
                                <div class="task-info">
                                    <div class="task-title">
                                        Interests - Business Owners
                                        <span class="task-type">Ad Set</span>
                                    </div>
                                    <div class="task-meta">
                                        <span><i class="fas fa-redo"></i> High frequency (2.8)</span>
                                        <span><i class="fas fa-clock"></i> 5 hours ago</span>
                                    </div>
                                </div>
                                <div class="task-metrics">
                                    <div class="task-metric">
                                        <div class="task-metric-label">Spend</div>
                                        <div class="task-metric-value">$650</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">Sales</div>
                                        <div class="task-metric-value">$820</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">ROAS</div>
                                        <div class="task-metric-value" style="color: #f97316;">1.26</div>
                                    </div>
                                </div>
                                <select class="task-status-select" onclick="event.stopPropagation()">
                                    <option value="open">Open</option>
                                    <option value="on-hold" selected>On Hold</option>
                                    <option value="resolved">Resolved</option>
                                </select>
                                <button class="task-expand-btn">
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                            </div>
                            <div class="task-details">
                                <div class="task-details-grid">
                                    <div class="task-detail-section">
                                        <h4>Threshold Details</h4>
                                        <div class="task-threshold-info">
                                            <div class="task-threshold-row">
                                                <span>Frequency Threshold</span>
                                                <span><strong>2.0</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Current Frequency</span>
                                                <span style="color: #f97316;"><strong>2.8</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Impressions</span>
                                                <span><strong>125,430</strong></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="task-detail-section">
                                        <h4>Comments</h4>
                                        <div class="task-comments">
                                            <div class="task-comment">
                                                <div class="task-comment-header">
                                                    <span class="task-comment-author">Sarah M.</span>
                                                    <span class="task-comment-time">3 hours ago</span>
                                                </div>
                                                <div class="task-comment-text">Put on hold. Monitoring for 24 hours to see if frequency drops after new creatives.</div>
                                            </div>
                                            <div class="task-comment">
                                                <div class="task-comment-header">
                                                    <span class="task-comment-author">System</span>
                                                    <span class="task-comment-time">5 hours ago</span>
                                                </div>
                                                <div class="task-comment-text">Task created: Ad Set frequency exceeded 2.0 threshold</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="task-add-comment">
                                    <input type="text" class="task-comment-input" placeholder="Add a comment...">
                                    <button class="task-comment-btn">Add</button>
                                </div>
                                <div class="task-actions-row">
                                    <button class="task-action-btn"><i class="fas fa-image"></i> Refresh Creative</button>
                                    <button class="task-action-btn"><i class="fas fa-external-link-alt"></i> View in Facebook</button>
                                    <button class="task-action-btn primary" style="margin-left: auto;"><i class="fas fa-check"></i> Mark Resolved</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Opportunities Tab Content -->
                <div id="opportunities" class="task-content">
                    <div class="task-list">
                        <!-- Opportunity 1 -->
                        <div class="task-item" data-task-id="6">
                            <div class="task-item-header" onclick="toggleTask(this)">
                                <span class="task-priority opportunity">Opportunity</span>
                                <div class="task-info">
                                    <div class="task-title">
                                        USA - Lifetime Deal
                                        <span class="task-type">Campaign</span>
                                    </div>
                                    <div class="task-meta">
                                        <span><i class="fas fa-arrow-up"></i> High ROAS - Consider budget increase</span>
                                        <span><i class="fas fa-clock"></i> 3 days ago</span>
                                    </div>
                                </div>
                                <div class="task-metrics">
                                    <div class="task-metric">
                                        <div class="task-metric-label">Spend</div>
                                        <div class="task-metric-value">$3,200</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">Sales</div>
                                        <div class="task-metric-value">$8,400</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">ROAS</div>
                                        <div class="task-metric-value" style="color: #22c55e;">2.63</div>
                                    </div>
                                </div>
                                <select class="task-status-select" onclick="event.stopPropagation()">
                                    <option value="open" selected>Open</option>
                                    <option value="on-hold">On Hold</option>
                                    <option value="applied">Applied</option>
                                </select>
                                <button class="task-expand-btn">
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                            </div>
                            <div class="task-details">
                                <div class="task-details-grid">
                                    <div class="task-detail-section">
                                        <h4>Recommendation</h4>
                                        <div class="task-threshold-info">
                                            <div class="task-threshold-row">
                                                <span>Current Budget</span>
                                                <span><strong>$100/day</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Suggested Budget</span>
                                                <span style="color: #22c55e;"><strong>$130/day (+30%)</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Current ROAS</span>
                                                <span style="color: #22c55e;"><strong>2.63</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Potential Extra Revenue</span>
                                                <span style="color: #22c55e;"><strong>+$2,520/week</strong></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="task-detail-section">
                                        <h4>Comments</h4>
                                        <div class="task-comments">
                                            <div class="task-comment">
                                                <div class="task-comment-header">
                                                    <span class="task-comment-author">System</span>
                                                    <span class="task-comment-time">3 days ago</span>
                                                </div>
                                                <div class="task-comment-text">Opportunity detected: Campaign has consistent ROAS above 2.5 for 7 days</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="task-add-comment">
                                    <input type="text" class="task-comment-input" placeholder="Add a comment...">
                                    <button class="task-comment-btn">Add</button>
                                </div>
                                <div class="task-actions-row">
                                    <button class="task-action-btn primary"><i class="fas fa-arrow-up"></i> Increase Budget</button>
                                    <button class="task-action-btn"><i class="fas fa-external-link-alt"></i> View in Facebook</button>
                                    <button class="task-action-btn" style="margin-left: auto;"><i class="fas fa-times"></i> Dismiss</button>
                                </div>
                            </div>
                        </div>

                        <!-- Opportunity 2 -->
                        <div class="task-item" data-task-id="7">
                            <div class="task-item-header" onclick="toggleTask(this)">
                                <span class="task-priority opportunity">Opportunity</span>
                                <div class="task-info">
                                    <div class="task-title">
                                        Lookalike - Top Customers
                                        <span class="task-type">Ad Set</span>
                                    </div>
                                    <div class="task-meta">
                                        <span><i class="fas fa-arrow-up"></i> High ROAS - Consider budget increase</span>
                                        <span><i class="fas fa-clock"></i> 2 days ago</span>
                                    </div>
                                </div>
                                <div class="task-metrics">
                                    <div class="task-metric">
                                        <div class="task-metric-label">Spend</div>
                                        <div class="task-metric-value">$1,850</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">Sales</div>
                                        <div class="task-metric-value">$4,200</div>
                                    </div>
                                    <div class="task-metric">
                                        <div class="task-metric-label">ROAS</div>
                                        <div class="task-metric-value" style="color: #22c55e;">2.27</div>
                                    </div>
                                </div>
                                <select class="task-status-select" onclick="event.stopPropagation()">
                                    <option value="open" selected>Open</option>
                                    <option value="on-hold">On Hold</option>
                                    <option value="applied">Applied</option>
                                </select>
                                <button class="task-expand-btn">
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                            </div>
                            <div class="task-details">
                                <div class="task-details-grid">
                                    <div class="task-detail-section">
                                        <h4>Recommendation</h4>
                                        <div class="task-threshold-info">
                                            <div class="task-threshold-row">
                                                <span>Current Budget</span>
                                                <span><strong>$50/day</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Suggested Budget</span>
                                                <span style="color: #22c55e;"><strong>$65/day (+30%)</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Current ROAS</span>
                                                <span style="color: #22c55e;"><strong>2.27</strong></span>
                                            </div>
                                            <div class="task-threshold-row">
                                                <span>Potential Extra Revenue</span>
                                                <span style="color: #22c55e;"><strong>+$735/week</strong></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="task-detail-section">
                                        <h4>Comments</h4>
                                        <div class="task-comments">
                                            <div class="task-comment">
                                                <div class="task-comment-header">
                                                    <span class="task-comment-author">System</span>
                                                    <span class="task-comment-time">2 days ago</span>
                                                </div>
                                                <div class="task-comment-text">Opportunity detected: Ad Set has consistent ROAS above 2.0 for 5 days</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="task-add-comment">
                                    <input type="text" class="task-comment-input" placeholder="Add a comment...">
                                    <button class="task-comment-btn">Add</button>
                                </div>
                                <div class="task-actions-row">
                                    <button class="task-action-btn primary"><i class="fas fa-arrow-up"></i> Increase Budget</button>
                                    <button class="task-action-btn"><i class="fas fa-external-link-alt"></i> View in Facebook</button>
                                    <button class="task-action-btn" style="margin-left: auto;"><i class="fas fa-times"></i> Dismiss</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="table-pagination">
                    <div class="pagination-left">
                        <span>Rows per page:</span>
                        <select class="pagination-select">
                            <option value="10">10</option>
                            <option value="20" selected>20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="pagination-center">
                        <span>1-7 of 7</span>
                    </div>
                    <div class="pagination-right">
                        <span>Page:</span>
                        <input type="number" class="pagination-input" value="1" min="1" max="1">
                        <span>of 1</span>
                        <button class="pagination-arrow" disabled><i class="fas fa-chevron-left"></i></button>
                        <button class="pagination-arrow" disabled><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>

            <!-- Campaigns Table -->
            <div id="campaigns-section" class="table-section dashboard-section">
                <div class="table-header">
                    <h3><i class="fas fa-bullhorn"></i> Campaigns <span class="count">5 Active</span></h3>
                    <div class="table-filter">
                        <select id="campaigns-status-filter" class="table-status-filter">
                            <option value="active" selected>Active</option>
                            <option value="paused">Paused</option>
                            <option value="all">All</option>
                        </select>
                    </div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Status</th>
                            <th>Campaign Name</th>
                            <th>Budget <i class="fas fa-sort sort-icon"></i></th>
                            <th class="sorted">Spent <i class="fas fa-sort-down sort-icon"></i></th>
                            <th>Sales <i class="fas fa-sort sort-icon"></i></th>
                            <th>Revenue <i class="fas fa-sort sort-icon"></i></th>
                            <th>ROAS <i class="fas fa-sort sort-icon"></i></th>
                            <th>Frequency <i class="fas fa-sort sort-icon"></i></th>
                            <th>Outbound Clicks <i class="fas fa-sort sort-icon"></i></th>
                            <th>Reach <i class="fas fa-sort sort-icon"></i></th>
                            <th>Impressions <i class="fas fa-sort sort-icon"></i></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="status-badge active">Active</span></td>
                            <td><strong>USA - Lifetime Deal</strong></td>
                            <td>$1,200.00</td>
                            <td>$4,250.00</td>
                            <td>8</td>
                            <td>$5,600.00</td>
                            <td><span class="roas-value good">2.50</span></td>
                            <td>1.8</td>
                            <td>3,245</td>
                            <td>125,400</td>
                            <td>225,720</td>
                        </tr>
                        <tr>
                            <td><span class="status-badge active">Active</span></td>
                            <td><strong>India - Tech Entrepreneurs</strong></td>
                            <td>$800.00</td>
                            <td>$2,890.00</td>
                            <td>6</td>
                            <td>$4,200.00</td>
                            <td><span class="roas-value good">1.45</span></td>
                            <td>1.5</td>
                            <td>2,890</td>
                            <td>98,500</td>
                            <td>147,750</td>
                        </tr>
                        <tr>
                            <td><span class="status-badge active">Active</span></td>
                            <td><strong>UK - Retargeting</strong></td>
                            <td>$500.00</td>
                            <td>$1,847.00</td>
                            <td>2</td>
                            <td>$1,400.00</td>
                            <td><span class="roas-value bad">0.60</span></td>
                            <td>2.1</td>
                            <td>1,456</td>
                            <td>45,200</td>
                            <td>94,920</td>
                        </tr>
                        <tr>
                            <td><span class="status-badge active">Active</span></td>
                            <td><strong>Canada - Lookalike</strong></td>
                            <td>$450.00</td>
                            <td>$1,563.00</td>
                            <td>4</td>
                            <td>$2,800.00</td>
                            <td><span class="roas-value good">1.79</span></td>
                            <td>1.3</td>
                            <td>1,823</td>
                            <td>67,800</td>
                            <td>88,140</td>
                        </tr>
                        <tr>
                            <td><span class="status-badge active">Active</span></td>
                            <td><strong>Australia - Broad</strong></td>
                            <td>$600.00</td>
                            <td>$1,900.00</td>
                            <td>3</td>
                            <td>$2,100.00</td>
                            <td><span class="roas-value warning">1.10</span></td>
                            <td>1.9</td>
                            <td>1,678</td>
                            <td>52,300</td>
                            <td>99,370</td>
                        </tr>
                    </tbody>
                </table>
                <!-- Pagination -->
                <div class="table-pagination">
                    <div class="pagination-left">
                        <span>Rows per page:</span>
                        <select class="pagination-select">
                            <option value="10">10</option>
                            <option value="20" selected>20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="pagination-center">
                        <span>1-5 of 5</span>
                    </div>
                    <div class="pagination-right">
                        <span>Page:</span>
                        <input type="number" class="pagination-input" value="1" min="1" max="1">
                        <span>of 1</span>
                        <button class="pagination-arrow" disabled><i class="fas fa-chevron-left"></i></button>
                        <button class="pagination-arrow" disabled><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>

            <!-- Ad Sets Table -->
            <div id="adsets-section" class="table-section dashboard-section">
                <div class="table-header">
                    <h3><i class="fas fa-layer-group"></i> Ad Sets <span class="count">12 Active</span></h3>
                    <div class="table-filter">
                        <select id="adsets-status-filter" class="table-status-filter">
                            <option value="active" selected>Active</option>
                            <option value="paused">Paused</option>
                            <option value="all">All</option>
                        </select>
                    </div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Status</th>
                            <th>Ad Set Name</th>
                            <th>Budget <i class="fas fa-sort sort-icon"></i></th>
                            <th>Spent <i class="fas fa-sort sort-icon"></i></th>
                            <th>Sales <i class="fas fa-sort sort-icon"></i></th>
                            <th>Revenue <i class="fas fa-sort sort-icon"></i></th>
                            <th>ROAS <i class="fas fa-sort sort-icon"></i></th>
                            <th>Frequency <i class="fas fa-sort sort-icon"></i></th>
                            <th>Outbound Clicks <i class="fas fa-sort sort-icon"></i></th>
                            <th>Reach <i class="fas fa-sort sort-icon"></i></th>
                            <th>Impressions <i class="fas fa-sort sort-icon"></i></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="status-badge active">Active</span></td>
                            <td>
                                <span class="name-with-tooltip" data-tooltip="Campaign: USA - Lifetime Deal">
                                    <strong>Interests - Tech Entrepreneurs</strong>
                                </span>
                            </td>
                            <td>$600.00</td>
                            <td>$2,100.00</td>
                            <td>5</td>
                            <td>$3,500.00</td>
                            <td><span class="roas-value good">1.67</span></td>
                            <td>1.6</td>
                            <td>1,890</td>
                            <td>72,500</td>
                            <td>116,000</td>
                        </tr>
                        <tr>
                            <td><span class="status-badge active">Active</span></td>
                            <td>
                                <span class="name-with-tooltip" data-tooltip="Campaign: USA - Lifetime Deal">
                                    <strong>Lookalike - Purchasers 1%</strong>
                                </span>
                            </td>
                            <td>$400.00</td>
                            <td>$1,450.00</td>
                            <td>3</td>
                            <td>$2,100.00</td>
                            <td><span class="roas-value good">1.45</span></td>
                            <td>1.8</td>
                            <td>1,355</td>
                            <td>52,900</td>
                            <td>95,220</td>
                        </tr>
                        <tr>
                            <td><span class="status-badge active">Active</span></td>
                            <td>
                                <span class="name-with-tooltip" data-tooltip="Campaign: India - Tech Entrepreneurs">
                                    <strong>Interests - Business Owners</strong>
                                </span>
                            </td>
                            <td>$250.00</td>
                            <td>$890.00</td>
                            <td>2</td>
                            <td>$1,400.00</td>
                            <td><span class="roas-value good">1.57</span></td>
                            <td>1.4</td>
                            <td>978</td>
                            <td>38,200</td>
                            <td>53,480</td>
                        </tr>
                    </tbody>
                </table>
                <!-- Pagination -->
                <div class="table-pagination">
                    <div class="pagination-left">
                        <span>Rows per page:</span>
                        <select class="pagination-select">
                            <option value="10">10</option>
                            <option value="20" selected>20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="pagination-center">
                        <span>1-12 of 12</span>
                    </div>
                    <div class="pagination-right">
                        <span>Page:</span>
                        <input type="number" class="pagination-input" value="1" min="1" max="1">
                        <span>of 1</span>
                        <button class="pagination-arrow" disabled><i class="fas fa-chevron-left"></i></button>
                        <button class="pagination-arrow" disabled><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>

            <!-- Ads Table -->
            <div id="ads-section" class="table-section dashboard-section">
                <div class="table-header">
                    <h3><i class="fas fa-ad"></i> Ads <span class="count">24 Active</span></h3>
                    <div class="table-filter">
                        <select id="ads-status-filter" class="table-status-filter">
                            <option value="active" selected>Active</option>
                            <option value="paused">Paused</option>
                            <option value="all">All</option>
                        </select>
                    </div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Status</th>
                            <th>Ad Name</th>
                            <th>Budget <i class="fas fa-sort sort-icon"></i></th>
                            <th>Spent <i class="fas fa-sort sort-icon"></i></th>
                            <th>Sales <i class="fas fa-sort sort-icon"></i></th>
                            <th>Revenue <i class="fas fa-sort sort-icon"></i></th>
                            <th>ROAS <i class="fas fa-sort sort-icon"></i></th>
                            <th>Frequency <i class="fas fa-sort sort-icon"></i></th>
                            <th>Outbound Clicks <i class="fas fa-sort sort-icon"></i></th>
                            <th>Reach <i class="fas fa-sort sort-icon"></i></th>
                            <th>Impressions <i class="fas fa-sort sort-icon"></i></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="status-badge active">Active</span></td>
                            <td>
                                <span class="name-with-tooltip" data-tooltip="Campaign: USA - Lifetime Deal | Ad Set: Interests - Tech Entrepreneurs">
                                    <strong>Video Ad v3 - Feature Demo</strong>
                                </span>
                            </td>
                            <td>$1,200.00</td>
                            <td>4</td>
                            <td>$2,800.00</td>
                            <td><span class="roas-value good">2.33</span></td>
                            <td>1.5</td>
                            <td>1,124</td>
                            <td>42,300</td>
                            <td>63,450</td>
                        </tr>
                        <tr>
                            <td><span class="status-badge active">Active</span></td>
                            <td>
                                <span class="name-with-tooltip" data-tooltip="Campaign: USA - Lifetime Deal | Ad Set: Lookalike - Purchasers 1%">
                                    <strong>Image Ad - Testimonial</strong>
                                </span>
                            </td>
                            <td>$850.00</td>
                            <td>2</td>
                            <td>$1,400.00</td>
                            <td><span class="roas-value good">1.65</span></td>
                            <td>1.7</td>
                        </tr>
                        <tr>
                            <td><span class="status-badge active">Active</span></td>
                            <td>
                                <span class="name-with-tooltip" data-tooltip="Campaign: India - Tech Entrepreneurs | Ad Set: Interests - Business Owners">
                                    <strong>Carousel Ad - Features</strong>
                                </span>
                            </td>
                            <td>$650.00</td>
                            <td>1</td>
                            <td>$700.00</td>
                            <td><span class="roas-value warning">1.08</span></td>
                            <td>1.3</td>
                        </tr>
                    </tbody>
                </table>
                <!-- Pagination -->
                <div class="table-pagination">
                    <div class="pagination-left">
                        <span>Rows per page:</span>
                        <select class="pagination-select">
                            <option value="10">10</option>
                            <option value="20" selected>20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="pagination-center">
                        <span>1-20 of 24</span>
                    </div>
                    <div class="pagination-right">
                        <span>Page:</span>
                        <input type="number" class="pagination-input" value="1" min="1" max="2">
                        <span>of 2</span>
                        <button class="pagination-arrow" disabled><i class="fas fa-chevron-left"></i></button>
                        <button class="pagination-arrow"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>

            <!-- Country Performance (Pabbly Data) -->
            <div id="country-section" class="table-section dashboard-section">
                <div class="table-header">
                    <h3>
                        <i class="fas fa-globe"></i> Country Performance
                        <span class="count">From Pabbly</span>
                        <span class="tooltip" style="margin-left: 8px;">
                            <i class="fas fa-info-circle" style="color: var(--text-secondary);"></i>
                            <span class="tooltip-text">Country data is from Pabbly Subscription Billing (actual sales), NOT Facebook pixel. This gives you accurate geographic performance.</span>
                        </span>
                    </h3>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Country</th>
                            <th>Ad Spend <i class="fas fa-sort sort-icon"></i></th>
                            <th>Sales <i class="fas fa-sort sort-icon"></i></th>
                            <th>Revenue <i class="fas fa-sort sort-icon"></i></th>
                            <th>ROAS <i class="fas fa-sort sort-icon"></i></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/us.png" class="country-flag" alt="US">
                                    <span>United States</span>
                                </div>
                            </td>
                            <td>$4,250.00</td>
                            <td>10</td>
                            <td>$7,000.00</td>
                            <td><span class="roas-value good">1.65</span></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/in.png" class="country-flag" alt="IN">
                                    <span>India</span>
                                </div>
                            </td>
                            <td>$2,890.00</td>
                            <td>6</td>
                            <td>$4,200.00</td>
                            <td><span class="roas-value good">1.45</span></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/ca.png" class="country-flag" alt="CA">
                                    <span>Canada</span>
                                </div>
                            </td>
                            <td>$1,563.00</td>
                            <td>4</td>
                            <td>$2,800.00</td>
                            <td><span class="roas-value good">1.79</span></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/au.png" class="country-flag" alt="AU">
                                    <span>Australia</span>
                                </div>
                            </td>
                            <td>$1,900.00</td>
                            <td>3</td>
                            <td>$2,100.00</td>
                            <td><span class="roas-value warning">1.10</span></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/gb.png" class="country-flag" alt="GB">
                                    <span>United Kingdom</span>
                                </div>
                            </td>
                            <td>$1,847.00</td>
                            <td>2</td>
                            <td>$1,400.00</td>
                            <td><span class="roas-value bad">0.76</span></td>
                        </tr>
                    </tbody>
                </table>
                <!-- Pagination -->
                <div class="table-pagination">
                    <div class="pagination-left">
                        <span>Rows per page:</span>
                        <select class="pagination-select">
                            <option value="10">10</option>
                            <option value="20" selected>20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="pagination-center">
                        <span>1-5 of 5</span>
                    </div>
                    <div class="pagination-right">
                        <span>Page:</span>
                        <input type="number" class="pagination-input" value="1" min="1" max="1">
                        <span>of 1</span>
                        <button class="pagination-arrow" disabled><i class="fas fa-chevron-left"></i></button>
                        <button class="pagination-arrow" disabled><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>

            <!-- Sales by Ad Creative Section (Dashboard) -->
            <div id="sales-creative-section" class="table-section dashboard-section">
                <div class="table-header">
                    <h3><i class="fas fa-palette"></i> Sales by Ad Creative <span class="count">23 Sales</span></h3>
                    <div class="table-filter">
                        <select class="table-status-filter">
                            <option value="all" selected>All Time</option>
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                        </select>
                    </div>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Creative</th>
                            <th>Ad Name</th>
                            <th>Campaign</th>
                            <th>Ad Set</th>
                            <th>Country</th>
                            <th>Amount</th>
                            <th>Date & Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="creative-thumbnail" data-preview="https://placehold.co/400x400/4F46E5/FFFFFF?text=Video+Ad+v3">
                                    <img src="https://placehold.co/40x40/4F46E5/FFFFFF?text=V" alt="Creative">
                                </div>
                            </td>
                            <td><strong>Video Ad v3 - Feature Demo</strong></td>
                            <td>USA - Lifetime Deal</td>
                            <td>Interests - Tech</td>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/us.png" class="country-flag" alt="US">
                                    <span>United States</span>
                                </div>
                            </td>
                            <td><strong style="color: var(--success-color);">$700</strong></td>
                            <td>
                                <div>Jan 24, 2026</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">3:45 PM</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="creative-thumbnail" data-preview="https://placehold.co/400x400/F59E0B/FFFFFF?text=Carousel+Ad">
                                    <img src="https://placehold.co/40x40/F59E0B/FFFFFF?text=C" alt="Creative">
                                </div>
                            </td>
                            <td><strong>Carousel Ad - Benefits</strong></td>
                            <td>USA - Lifetime Deal</td>
                            <td>Lookalike - Customers</td>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/us.png" class="country-flag" alt="US">
                                    <span>United States</span>
                                </div>
                            </td>
                            <td><strong style="color: var(--success-color);">$700</strong></td>
                            <td>
                                <div>Jan 24, 2026</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">1:23 PM</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="creative-thumbnail" data-preview="https://placehold.co/400x400/6366F1/FFFFFF?text=Static+Image">
                                    <img src="https://placehold.co/40x40/6366F1/FFFFFF?text=S" alt="Creative">
                                </div>
                            </td>
                            <td><strong>Static Image - Pricing</strong></td>
                            <td>UK - Retargeting</td>
                            <td>Website Visitors 30 Days</td>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/gb.png" class="country-flag" alt="GB">
                                    <span>United Kingdom</span>
                                </div>
                            </td>
                            <td><strong style="color: var(--success-color);">$700</strong></td>
                            <td>
                                <div>Jan 24, 2026</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">10:15 AM</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="creative-thumbnail" data-preview="https://placehold.co/400x400/4F46E5/FFFFFF?text=Video+Ad+v3">
                                    <img src="https://placehold.co/40x40/4F46E5/FFFFFF?text=V" alt="Creative">
                                </div>
                            </td>
                            <td><strong>Video Ad v3 - Feature Demo</strong></td>
                            <td>USA - Lifetime Deal</td>
                            <td>Interests - Tech</td>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/ca.png" class="country-flag" alt="CA">
                                    <span>Canada</span>
                                </div>
                            </td>
                            <td><strong style="color: var(--success-color);">$700</strong></td>
                            <td>
                                <div>Jan 23, 2026</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">8:30 PM</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="creative-thumbnail" data-preview="https://placehold.co/400x400/EC4899/FFFFFF?text=GIF+Ad">
                                    <img src="https://placehold.co/40x40/EC4899/FFFFFF?text=G" alt="Creative">
                                </div>
                            </td>
                            <td><strong>GIF Ad - Quick Demo</strong></td>
                            <td>Global - Awareness</td>
                            <td>Broad - SaaS Interests</td>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/de.png" class="country-flag" alt="DE">
                                    <span>Germany</span>
                                </div>
                            </td>
                            <td><strong style="color: var(--success-color);">$700</strong></td>
                            <td>
                                <div>Jan 23, 2026</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">4:12 PM</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="creative-thumbnail" data-preview="https://placehold.co/400x400/F59E0B/FFFFFF?text=Carousel+Ad">
                                    <img src="https://placehold.co/40x40/F59E0B/FFFFFF?text=C" alt="Creative">
                                </div>
                            </td>
                            <td><strong>Carousel Ad - Features</strong></td>
                            <td>India - Growth</td>
                            <td>Interests - Startups</td>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/in.png" class="country-flag" alt="IN">
                                    <span>India</span>
                                </div>
                            </td>
                            <td><strong style="color: var(--success-color);">$700</strong></td>
                            <td>
                                <div>Jan 22, 2026</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">2:00 PM</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="creative-thumbnail" data-preview="https://placehold.co/400x400/10B981/FFFFFF?text=Image+Ad">
                                    <img src="https://placehold.co/40x40/10B981/FFFFFF?text=I" alt="Creative">
                                </div>
                            </td>
                            <td><strong>Image Ad - Testimonial</strong></td>
                            <td>EU - Subscription Q1</td>
                            <td>Retargeting - Cart</td>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/fr.png" class="country-flag" alt="FR">
                                    <span>France</span>
                                </div>
                            </td>
                            <td><strong style="color: var(--success-color);">$700</strong></td>
                            <td>
                                <div>Jan 22, 2026</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">6:30 PM</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="creative-thumbnail" data-preview="https://placehold.co/400x400/4F46E5/FFFFFF?text=Video+Ad">
                                    <img src="https://placehold.co/40x40/4F46E5/FFFFFF?text=V" alt="Creative">
                                </div>
                            </td>
                            <td><strong>Video Ad - Product Tour</strong></td>
                            <td>USA - Lifetime Deal</td>
                            <td>Lookalike - Customers</td>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/us.png" class="country-flag" alt="US">
                                    <span>United States</span>
                                </div>
                            </td>
                            <td><strong style="color: var(--success-color);">$700</strong></td>
                            <td>
                                <div>Jan 21, 2026</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">11:45 AM</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="creative-thumbnail" data-preview="https://placehold.co/400x400/F59E0B/FFFFFF?text=Carousel">
                                    <img src="https://placehold.co/40x40/F59E0B/FFFFFF?text=C" alt="Creative">
                                </div>
                            </td>
                            <td><strong>Carousel Ad - Use Cases</strong></td>
                            <td>Global - Awareness</td>
                            <td>Broad - Business</td>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/au.png" class="country-flag" alt="AU">
                                    <span>Australia</span>
                                </div>
                            </td>
                            <td><strong style="color: var(--success-color);">$700</strong></td>
                            <td>
                                <div>Jan 21, 2026</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">9:15 AM</div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div class="creative-thumbnail" data-preview="https://placehold.co/400x400/6366F1/FFFFFF?text=Static">
                                    <img src="https://placehold.co/40x40/6366F1/FFFFFF?text=S" alt="Creative">
                                </div>
                            </td>
                            <td><strong>Static Image - Discount</strong></td>
                            <td>India - Growth</td>
                            <td>Interests - Startups</td>
                            <td>
                                <div class="name-cell">
                                    <img src="https://flagcdn.com/24x18/in.png" class="country-flag" alt="IN">
                                    <span>India</span>
                                </div>
                            </td>
                            <td><strong style="color: var(--success-color);">$700</strong></td>
                            <td>
                                <div>Jan 20, 2026</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">3:00 PM</div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- Pagination -->
                <div class="table-pagination">
                    <div class="pagination-left">
                        <span>Rows per page:</span>
                        <select class="pagination-select">
                            <option value="10" selected>10</option>
                            <option value="25">25</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="pagination-center">
                        <span>1-10 of 23</span>
                    </div>
                    <div class="pagination-right">
                        <span>Page:</span>
                        <input type="number" class="pagination-input" value="1" min="1" max="3">
                        <span>of 3</span>
                        <button class="pagination-arrow" disabled><i class="fas fa-chevron-left"></i></button>
                        <button class="pagination-arrow"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>

            <!-- Creative Preview Modal -->
            <div id="creative-preview-modal" class="creative-modal">
                <div class="creative-modal-content">
                    <span class="creative-modal-close">&times;</span>
                    <img id="creative-preview-image" src="" alt="Ad Creative Preview">
                </div>
            </div>

            <!-- Facebook Connection Section -->
            <div id="facebook-connection-section" class="table-section dashboard-section">
                <div class="table-header">
                    <h3><i class="fab fa-facebook" style="color: #1877f2;"></i> Facebook Connection</h3>
                </div>
                <div style="padding: 24px;">
                    <p style="color: var(--text-secondary); margin-bottom: 24px;">Connect your Facebook Business Account to sync campaign data automatically.</p>

                    <!-- Connected Account -->
                    <div class="config-section">
                        <h4><i class="fas fa-check-circle" style="color: var(--success-color);"></i> Connected Account</h4>
                        <div style="display: flex; align-items: center; gap: 16px; padding: 16px; background: white; border-radius: 8px; border: 1px solid var(--border-color);">
                            <div style="width: 48px; height: 48px; border-radius: 50%; background: #1877f2; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;">
                                <i class="fab fa-facebook-f"></i>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 16px;">Pabbly Business Account</div>
                                <div style="color: var(--text-secondary); font-size: 13px;">Business ID: 1234567890123456</div>
                                <div style="color: var(--success-color); font-size: 12px; margin-top: 4px;"><i class="fas fa-check-circle"></i> Connected on Jan 15, 2026</div>
                            </div>
                            <button class="btn-secondary"><i class="fas fa-sync-alt"></i> Refresh Token</button>
                            <button class="btn-secondary" style="color: var(--danger-color); border-color: var(--danger-color);"><i class="fas fa-unlink"></i> Disconnect</button>
                        </div>
                    </div>

                    <!-- Ad Accounts -->
                    <div class="config-section">
                        <h4><i class="fas fa-ad"></i> Linked Ad Accounts</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Ad Account Name</th>
                                    <th>Account ID</th>
                                    <th>Status</th>
                                    <th>Last Sync</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Pabbly Connect</strong></td>
                                    <td>act_123456789</td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>5 min ago</td>
                                    <td><button class="action-btn view">Configure</button></td>
                                </tr>
                                <tr>
                                    <td><strong>Pabbly Chatflow</strong></td>
                                    <td>act_987654321</td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>5 min ago</td>
                                    <td><button class="action-btn view">Configure</button></td>
                                </tr>
                                <tr>
                                    <td><strong>PSB</strong></td>
                                    <td>act_456789123</td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td>5 min ago</td>
                                    <td><button class="action-btn view">Configure</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Sync Settings -->
                    <div class="config-section">
                        <h4><i class="fas fa-clock"></i> Sync Settings</h4>
                        <div class="config-grid">
                            <div class="config-item">
                                <label>Data Sync Frequency</label>
                                <select class="config-input">
                                    <option>Every 15 minutes</option>
                                    <option selected>Every 30 minutes</option>
                                    <option>Every 1 hour</option>
                                </select>
                                <span class="input-help">How often to fetch data from Facebook API</span>
                            </div>
                            <div class="config-item">
                                <label>Creative Sync Frequency</label>
                                <select class="config-input">
                                    <option>Every 3 hours</option>
                                    <option selected>Every 6 hours</option>
                                    <option>Every 12 hours</option>
                                </select>
                                <span class="input-help">How often to fetch ad images (rate limit safe)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Webhooks Section -->
            <div id="webhooks-section" class="table-section dashboard-section">
                <div class="table-header">
                    <h3><i class="fas fa-plug" style="color: var(--primary-color);"></i> Webhooks Configuration</h3>
                </div>
                <div style="padding: 24px;">
                    <p style="color: var(--text-secondary); margin-bottom: 24px;">Configure webhooks to receive real-time data from Pabbly and send alerts to Google Chat.</p>

                    <!-- Incoming Webhooks -->
                    <div class="config-section">
                        <h4><i class="fas fa-download"></i> Incoming Webhooks (Receive Data)</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Webhook Name</th>
                                    <th>URL</th>
                                    <th>Purpose</th>
                                    <th>Last Received</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Pabbly Sales Webhook</strong></td>
                                    <td><code style="background: #f5f5f5; padding: 4px 8px; border-radius: 4px; font-size: 12px;">https://api.dashboard.com/webhook/sales/abc123</code></td>
                                    <td>Receives sale notifications</td>
                                    <td>2 min ago</td>
                                    <td><button class="action-btn view">Copy URL</button></td>
                                </tr>
                                <tr>
                                    <td><strong>Leads Webhook</strong></td>
                                    <td><code style="background: #f5f5f5; padding: 4px 8px; border-radius: 4px; font-size: 12px;">https://api.dashboard.com/webhook/leads/def456</code></td>
                                    <td>Receives lead data from CRM</td>
                                    <td>15 min ago</td>
                                    <td><button class="action-btn view">Copy URL</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Outgoing Webhooks -->
                    <div class="config-section">
                        <h4><i class="fas fa-upload"></i> Outgoing Webhooks (Send Alerts)</h4>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Destination</th>
                                    <th>Triggers</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Google Chat - Alerts</strong></td>
                                    <td>Google Chat Space: #ads-alerts</td>
                                    <td>Overspending, Low ROAS, High Frequency</td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td><button class="action-btn view">Edit</button></td>
                                </tr>
                                <tr>
                                    <td><strong>Google Chat - Sales</strong></td>
                                    <td>Google Chat Space: #sales-wins</td>
                                    <td>New Sale Notifications</td>
                                    <td><span class="status-badge active">Active</span></td>
                                    <td><button class="action-btn view">Edit</button></td>
                                </tr>
                            </tbody>
                        </table>
                        <div style="margin-top: 16px;">
                            <button class="btn-primary"><i class="fas fa-plus"></i> Add Webhook</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alert Thresholds Section -->
            <div id="alert-thresholds-section" class="table-section dashboard-section">
                <div class="table-header">
                    <h3><i class="fas fa-bell" style="color: var(--primary-color);"></i> Alert & Budget Settings</h3>
                </div>
                <div style="padding: 24px;">
                    <p style="color: var(--text-secondary); margin-bottom: 24px;">
                        Set global threshold rules that apply to ALL campaigns, ad sets, ads, and countries.
                        Monitoring activates after spend exceeds threshold. Alert triggers when: <strong>ROAS < Target ROAS</strong> (continuous monitoring using lifetime cumulative data)
                    </p>

                    <!-- Threshold Rules Table -->
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Level</th>
                                <th>Description</th>
                                <th>Spend Threshold</th>
                                <th>ROAS Target</th>
                                <th>Time Window</th>
                                <th>Alert Rule</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <i class="fas fa-bullhorn" style="color: var(--primary-color); font-size: 18px;"></i>
                                        <strong>Campaigns</strong>
                                    </div>
                                </td>
                                <td style="color: var(--text-secondary);">Applies to all campaigns</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 4px;">
                                        <span>$</span>
                                        <input type="number" class="config-input" value="1400" style="width: 100px;">
                                    </div>
                                </td>
                                <td>
                                    <input type="number" class="config-input" value="1.0" step="0.1" style="width: 80px;">
                                </td>
                                <td>
                                    <span class="status-badge status-active">Lifetime</span>
                                </td>
                                <td style="color: var(--text-secondary); font-size: 13px;">
                                    After spend > $1,400, if ROAS < 1.0  Alert
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <i class="fas fa-layer-group" style="color: var(--primary-color); font-size: 18px;"></i>
                                        <strong>Ad Sets</strong>
                                    </div>
                                </td>
                                <td style="color: var(--text-secondary);">Applies to all ad sets</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 4px;">
                                        <span>$</span>
                                        <input type="number" class="config-input" value="700" style="width: 100px;">
                                    </div>
                                </td>
                                <td>
                                    <input type="number" class="config-input" value="1.0" step="0.1" style="width: 80px;">
                                </td>
                                <td>
                                    <span class="status-badge status-active">Lifetime</span>
                                </td>
                                <td style="color: var(--text-secondary); font-size: 13px;">
                                    After spend > $700, if ROAS < 1.0  Alert
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <i class="fas fa-ad" style="color: var(--primary-color); font-size: 18px;"></i>
                                        <strong>Ads</strong>
                                    </div>
                                </td>
                                <td style="color: var(--text-secondary);">Applies to all ads</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 4px;">
                                        <span>$</span>
                                        <input type="number" class="config-input" value="350" style="width: 100px;">
                                    </div>
                                </td>
                                <td>
                                    <input type="number" class="config-input" value="1.0" step="0.1" style="width: 80px;">
                                </td>
                                <td>
                                    <span class="status-badge status-active">Lifetime</span>
                                </td>
                                <td style="color: var(--text-secondary); font-size: 13px;">
                                    After spend > $350, if ROAS < 1.0  Alert
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <i class="fas fa-globe" style="color: var(--primary-color); font-size: 18px;"></i>
                                        <strong>Country Performance</strong>
                                    </div>
                                </td>
                                <td style="color: var(--text-secondary);">Applies to all countries</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 4px;">
                                        <span>$</span>
                                        <input type="number" class="config-input" value="500" style="width: 100px;">
                                    </div>
                                </td>
                                <td>
                                    <input type="number" class="config-input" value="1.0" step="0.1" style="width: 80px;">
                                </td>
                                <td>
                                    <span class="status-badge status-active">Lifetime</span>
                                </td>
                                <td style="color: var(--text-secondary); font-size: 13px;">
                                    After spend > $500, if ROAS < 1.0  Alert
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- View Active Alerts Link -->
                    <div style="margin-top: 32px; padding: 20px; background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px;">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <div>
                                <h4 style="margin: 0 0 8px 0;"><i class="fas fa-robot" style="color: #3b82f6;"></i> Automatic Monitoring Active</h4>
                                <p style="color: var(--text-secondary); margin: 0; font-size: 13px;">
                                    System is monitoring all campaigns, ad sets, ads, and countries based on the thresholds above.
                                    Alerts are sent automatically to Google Chat and shown in the Alerts dashboard.
                                </p>
                            </div>
                            <button class="btn-primary" onclick="showSection('alerts-section', document.querySelector('[onclick*=alerts-section]'))" style="white-space: nowrap;">
                                <i class="fas fa-bell"></i> View Active Alerts (7)
                            </button>
                        </div>
                    </div>

                    <!-- Notification Settings -->
                    <div style="margin-top: 32px; padding-top: 24px; border-top: 1px solid var(--border-color);">
                        <h4 style="margin-bottom: 16px;"><i class="fas fa-bell"></i> Notification Settings</h4>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" checked>
                                <span>Send Google Chat notifications when thresholds are exceeded</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" checked>
                                <span>Show in-app alerts for threshold breaches</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox">
                                <span>Send daily summary email</span>
                            </label>
                        </div>
                    </div>

                    <div style="margin-top: 24px; display: flex; gap: 12px;">
                        <button class="btn-primary"><i class="fas fa-save"></i> Save Settings</button>
                        <button class="btn-secondary"><i class="fas fa-undo"></i> Reset to Defaults</button>
                    </div>
                </div>
            </div>

            <!-- User Management Section -->
            <div id="user-management-section" class="table-section dashboard-section">
                <div class="table-header">
                    <h3><i class="fas fa-user-cog" style="color: var(--primary-color);"></i> User Management</h3>
                    <button class="btn-primary"><i class="fas fa-plus"></i> Add User</button>
                </div>
                <div style="padding: 24px;">
                    <p style="color: var(--text-secondary); margin-bottom: 24px;">Manage team members and their access permissions.</p>

                    <!-- Users Table -->
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Ad Account Access</th>
                                <th>Last Active</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 36px; height: 36px; border-radius: 50%; background: var(--primary-color); color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">JD</div>
                                        <div>
                                            <div style="font-weight: 600;">John Doe</div>
                                            <div style="font-size: 12px; color: var(--text-secondary);">Owner</div>
                                        </div>
                                    </div>
                                </td>
                                <td>john@pabbly.com</td>
                                <td><span class="status-badge active">Admin</span></td>
                                <td>All Accounts</td>
                                <td>Just now</td>
                                <td><button class="action-btn view">Edit</button></td>
                            </tr>
                            <tr>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 36px; height: 36px; border-radius: 50%; background: #6366f1; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">SM</div>
                                        <div>
                                            <div style="font-weight: 600;">Sarah Miller</div>
                                        </div>
                                    </div>
                                </td>
                                <td>sarah@pabbly.com</td>
                                <td><span class="status-badge" style="background: #e7f3ff; color: var(--primary-color);">Manager</span></td>
                                <td>Pabbly Connect, Pabbly Chatflow</td>
                                <td>2 hours ago</td>
                                <td><button class="action-btn view">Edit</button></td>
                            </tr>
                            <tr>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 36px; height: 36px; border-radius: 50%; background: #f59e0b; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600;">MK</div>
                                        <div>
                                            <div style="font-weight: 600;">Mike Kumar</div>
                                        </div>
                                    </div>
                                </td>
                                <td>mike@pabbly.com</td>
                                <td><span class="status-badge" style="background: #f5f5f5; color: var(--text-secondary);">Viewer</span></td>
                                <td>Pabbly Connect</td>
                                <td>1 day ago</td>
                                <td><button class="action-btn view">Edit</button></td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- Roles Legend -->
                    <div class="config-section" style="margin-top: 24px;">
                        <h4><i class="fas fa-shield-alt"></i> Role Permissions</h4>
                        <table class="data-table" style="font-size: 13px;">
                            <thead>
                                <tr>
                                    <th>Permission</th>
                                    <th>Admin</th>
                                    <th>Manager</th>
                                    <th>Viewer</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>View Dashboard</td>
                                    <td><i class="fas fa-check" style="color: var(--success-color);"></i></td>
                                    <td><i class="fas fa-check" style="color: var(--success-color);"></i></td>
                                    <td><i class="fas fa-check" style="color: var(--success-color);"></i></td>
                                </tr>
                                <tr>
                                    <td>Edit Data (Sales/Leads)</td>
                                    <td><i class="fas fa-check" style="color: var(--success-color);"></i></td>
                                    <td><i class="fas fa-check" style="color: var(--success-color);"></i></td>
                                    <td><i class="fas fa-times" style="color: var(--danger-color);"></i></td>
                                </tr>
                                <tr>
                                    <td>Configure Alerts</td>
                                    <td><i class="fas fa-check" style="color: var(--success-color);"></i></td>
                                    <td><i class="fas fa-check" style="color: var(--success-color);"></i></td>
                                    <td><i class="fas fa-times" style="color: var(--danger-color);"></i></td>
                                </tr>
                                <tr>
                                    <td>Manage Users</td>
                                    <td><i class="fas fa-check" style="color: var(--success-color);"></i></td>
                                    <td><i class="fas fa-times" style="color: var(--danger-color);"></i></td>
                                    <td><i class="fas fa-times" style="color: var(--danger-color);"></i></td>
                                </tr>
                                <tr>
                                    <td>Access Settings</td>
                                    <td><i class="fas fa-check" style="color: var(--success-color);"></i></td>
                                    <td><i class="fas fa-times" style="color: var(--danger-color);"></i></td>
                                    <td><i class="fas fa-times" style="color: var(--danger-color);"></i></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Pabbly Revenue Data Section -->
            <div id="pabbly-revenue-section" class="dashboard-section">
                <!-- Top 10 Revenue by Country Card -->
                <div class="table-section" style="margin-bottom: 20px;">
                    <div class="table-header">
                        <h3><i class="fas fa-globe"></i> Top 10 Revenue by Country <span class="count">This Month</span></h3>
                    </div>
                    <div style="padding: 16px 20px;">
                        <div style="display: flex; justify-content: space-between; gap: 10px;">
                            <div style="flex: 1; text-align: center; padding: 12px 8px; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px;">
                                <img src="https://flagcdn.com/24x18/us.png" alt="US" style="border-radius: 2px; margin-bottom: 6px;">
                                <div style="font-weight: 600; font-size: 11px; color: var(--text-color);">USA</div>
                                <div style="font-size: 12px; font-weight: 600; color: #166534;">$7,000</div>
                                <div style="font-size: 10px; color: var(--text-secondary);">10 sales</div>
                            </div>
                            <div style="flex: 1; text-align: center; padding: 12px 8px; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px;">
                                <img src="https://flagcdn.com/24x18/in.png" alt="IN" style="border-radius: 2px; margin-bottom: 6px;">
                                <div style="font-weight: 600; font-size: 11px; color: var(--text-color);">India</div>
                                <div style="font-size: 12px; font-weight: 600; color: #166534;">$4,200</div>
                                <div style="font-size: 10px; color: var(--text-secondary);">6 sales</div>
                            </div>
                            <div style="flex: 1; text-align: center; padding: 12px 8px; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px;">
                                <img src="https://flagcdn.com/24x18/ca.png" alt="CA" style="border-radius: 2px; margin-bottom: 6px;">
                                <div style="font-weight: 600; font-size: 11px; color: var(--text-color);">Canada</div>
                                <div style="font-size: 12px; font-weight: 600; color: #166534;">$2,800</div>
                                <div style="font-size: 10px; color: var(--text-secondary);">4 sales</div>
                            </div>
                            <div style="flex: 1; text-align: center; padding: 12px 8px; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px;">
                                <img src="https://flagcdn.com/24x18/gb.png" alt="UK" style="border-radius: 2px; margin-bottom: 6px;">
                                <div style="font-weight: 600; font-size: 11px; color: var(--text-color);">UK</div>
                                <div style="font-size: 12px; font-weight: 600; color: #166534;">$2,100</div>
                                <div style="font-size: 10px; color: var(--text-secondary);">3 sales</div>
                            </div>
                            <div style="flex: 1; text-align: center; padding: 12px 8px; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px;">
                                <img src="https://flagcdn.com/24x18/de.png" alt="DE" style="border-radius: 2px; margin-bottom: 6px;">
                                <div style="font-weight: 600; font-size: 11px; color: var(--text-color);">Germany</div>
                                <div style="font-size: 12px; font-weight: 600; color: #166534;">$1,400</div>
                                <div style="font-size: 10px; color: var(--text-secondary);">2 sales</div>
                            </div>
                            <div style="flex: 1; text-align: center; padding: 12px 8px; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px;">
                                <img src="https://flagcdn.com/24x18/au.png" alt="AU" style="border-radius: 2px; margin-bottom: 6px;">
                                <div style="font-weight: 600; font-size: 11px; color: var(--text-color);">Australia</div>
                                <div style="font-size: 12px; font-weight: 600; color: #166534;">$1,400</div>
                                <div style="font-size: 10px; color: var(--text-secondary);">2 sales</div>
                            </div>
                            <div style="flex: 1; text-align: center; padding: 12px 8px; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px;">
                                <img src="https://flagcdn.com/24x18/fr.png" alt="FR" style="border-radius: 2px; margin-bottom: 6px;">
                                <div style="font-weight: 600; font-size: 11px; color: var(--text-color);">France</div>
                                <div style="font-size: 12px; font-weight: 600; color: #166534;">$700</div>
                                <div style="font-size: 10px; color: var(--text-secondary);">1 sale</div>
                            </div>
                            <div style="flex: 1; text-align: center; padding: 12px 8px; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px;">
                                <img src="https://flagcdn.com/24x18/nl.png" alt="NL" style="border-radius: 2px; margin-bottom: 6px;">
                                <div style="font-weight: 600; font-size: 11px; color: var(--text-color);">Netherlands</div>
                                <div style="font-size: 12px; font-weight: 600; color: #166534;">$700</div>
                                <div style="font-size: 10px; color: var(--text-secondary);">1 sale</div>
                            </div>
                            <div style="flex: 1; text-align: center; padding: 12px 8px; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px;">
                                <img src="https://flagcdn.com/24x18/br.png" alt="BR" style="border-radius: 2px; margin-bottom: 6px;">
                                <div style="font-weight: 600; font-size: 11px; color: var(--text-color);">Brazil</div>
                                <div style="font-size: 12px; font-weight: 600; color: #166534;">$700</div>
                                <div style="font-size: 10px; color: var(--text-secondary);">1 sale</div>
                            </div>
                            <div style="flex: 1; text-align: center; padding: 12px 8px; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px;">
                                <img src="https://flagcdn.com/24x18/sg.png" alt="SG" style="border-radius: 2px; margin-bottom: 6px;">
                                <div style="font-weight: 600; font-size: 11px; color: var(--text-color);">Singapore</div>
                                <div style="font-size: 12px; font-weight: 600; color: #166534;">$700</div>
                                <div style="font-size: 10px; color: var(--text-secondary);">1 sale</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Revenue Data Table Card -->
                <div class="table-section">
                    <div class="table-header">
                        <h3><i class="fas fa-file-invoice-dollar"></i> Revenue Data <span class="count">23 Entries</span></h3>
                        <button class="btn-primary" onclick="openAddRevenueModal()"><i class="fas fa-plus"></i> Add Entry</button>
                    </div>

                    <!-- Filters and Search -->
                <div style="padding: 16px 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; gap: 16px; flex-wrap: wrap;">
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <select class="table-status-filter" style="min-width: 130px;">
                            <option>All Time</option>
                            <option>Today</option>
                            <option>This Week</option>
                            <option selected>This Month</option>
                            <option>Last 30 Days</option>
                            <option>Last 90 Days</option>
                        </select>
                        <div style="position: relative;">
                            <select class="table-status-filter" id="revenue-country-filter" style="min-width: 150px;">
                                <option value="">All Countries</option>
                                <option value="us">United States</option>
                                <option value="in">India</option>
                                <option value="ca">Canada</option>
                                <option value="gb">United Kingdom</option>
                                <option value="de">Germany</option>
                                <option value="au">Australia</option>
                                <option value="fr">France</option>
                                <option value="nl">Netherlands</option>
                                <option value="br">Brazil</option>
                                <option value="sg">Singapore</option>
                            </select>
                        </div>
                    </div>
                    <div style="position: relative; flex: 1; max-width: 300px;">
                        <i class="fas fa-search" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"></i>
                        <input type="text" placeholder="Search by Transaction ID..." style="width: 100%; padding: 8px 12px 8px 36px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                    </div>
                </div>

                <!-- Revenue Table -->
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Date & Time</th>
                            <th>Transaction ID</th>
                            <th>Plan</th>
                            <th>Country</th>
                            <th>Amount</th>
                            <th>Source</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div>Jan 24, 2026</div>
                                <div style="font-size: 11px; color: var(--text-secondary);">3:45 PM</div>
                            </td>
                            <td><code style="background: #f3f4f6; padding: 2px 8px; border-radius: 4px; font-size: 12px;">TXN_2026012445</code></td>
                            <td><strong>Lifetime Deal</strong></td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <img src="https://flagcdn.com/20x15/us.png" alt="US">
                                    United States
                                </div>
                            </td>
                            <td><strong style="color: #166534;">$700.00</strong></td>
                            <td><span class="status-badge active">Razorpay</span></td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="action-menu-dropdown">
                                        <button class="action-menu-item" onclick="editRevenueEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                                        <button class="action-menu-item delete" onclick="confirmDeleteEntry(this)"><i class="fas fa-trash"></i> Delete</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>Jan 24, 2026</div>
                                <div style="font-size: 11px; color: var(--text-secondary);">1:23 PM</div>
                            </td>
                            <td><code style="background: #f3f4f6; padding: 2px 8px; border-radius: 4px; font-size: 12px;">TXN_2026012444</code></td>
                            <td><strong>Annual Plan</strong></td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <img src="https://flagcdn.com/20x15/us.png" alt="US">
                                    United States
                                </div>
                            </td>
                            <td><strong style="color: #166534;">$700.00</strong></td>
                            <td><span class="status-badge" style="background: #e7f3ff; color: var(--primary-color);">PayPal</span></td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="action-menu-dropdown">
                                        <button class="action-menu-item" onclick="editRevenueEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                                        <button class="action-menu-item delete" onclick="confirmDeleteEntry(this)"><i class="fas fa-trash"></i> Delete</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>Jan 24, 2026</div>
                                <div style="font-size: 11px; color: var(--text-secondary);">10:15 AM</div>
                            </td>
                            <td><code style="background: #f3f4f6; padding: 2px 8px; border-radius: 4px; font-size: 12px;">TXN_2026012443</code></td>
                            <td><strong>Lifetime Deal</strong></td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <img src="https://flagcdn.com/20x15/gb.png" alt="UK">
                                    United Kingdom
                                </div>
                            </td>
                            <td><strong style="color: #166534;">$700.00</strong></td>
                            <td><span class="status-badge active">Razorpay</span></td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="action-menu-dropdown">
                                        <button class="action-menu-item" onclick="editRevenueEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                                        <button class="action-menu-item delete" onclick="confirmDeleteEntry(this)"><i class="fas fa-trash"></i> Delete</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>Jan 23, 2026</div>
                                <div style="font-size: 11px; color: var(--text-secondary);">8:30 PM</div>
                            </td>
                            <td><code style="background: #f3f4f6; padding: 2px 8px; border-radius: 4px; font-size: 12px;">TXN_2026012342</code></td>
                            <td><strong>Pro Plan</strong></td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <img src="https://flagcdn.com/20x15/ca.png" alt="CA">
                                    Canada
                                </div>
                            </td>
                            <td><strong style="color: #166534;">$700.00</strong></td>
                            <td><span class="status-badge" style="background: #fef3c7; color: #92400e;">Manual</span></td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="action-menu-dropdown">
                                        <button class="action-menu-item" onclick="editRevenueEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                                        <button class="action-menu-item delete" onclick="confirmDeleteEntry(this)"><i class="fas fa-trash"></i> Delete</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>Jan 23, 2026</div>
                                <div style="font-size: 11px; color: var(--text-secondary);">4:12 PM</div>
                            </td>
                            <td><code style="background: #f3f4f6; padding: 2px 8px; border-radius: 4px; font-size: 12px;">TXN_2026012341</code></td>
                            <td><strong>Standard Plan</strong></td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <img src="https://flagcdn.com/20x15/de.png" alt="DE">
                                    Germany
                                </div>
                            </td>
                            <td><strong style="color: #166534;">$700.00</strong></td>
                            <td><span class="status-badge active">Razorpay</span></td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="action-menu-dropdown">
                                        <button class="action-menu-item" onclick="editRevenueEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                                        <button class="action-menu-item delete" onclick="confirmDeleteEntry(this)"><i class="fas fa-trash"></i> Delete</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <div>Jan 22, 2026</div>
                                <div style="font-size: 11px; color: var(--text-secondary);">2:45 PM</div>
                            </td>
                            <td><code style="background: #f3f4f6; padding: 2px 8px; border-radius: 4px; font-size: 12px;">TXN_2026012240</code></td>
                            <td><strong>Monthly Plan</strong></td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <img src="https://flagcdn.com/20x15/in.png" alt="IN">
                                    India
                                </div>
                            </td>
                            <td><strong style="color: #166534;">$700.00</strong></td>
                            <td><span class="status-badge" style="background: #e7f3ff; color: var(--primary-color);">PayPal</span></td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="action-menu-dropdown">
                                        <button class="action-menu-item" onclick="editRevenueEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                                        <button class="action-menu-item delete" onclick="confirmDeleteEntry(this)"><i class="fas fa-trash"></i> Delete</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- Pagination -->
                <div class="table-pagination">
                    <div class="pagination-left">
                        <span>Rows per page:</span>
                        <select class="pagination-select">
                            <option value="10">10</option>
                            <option value="20" selected>20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="pagination-center">
                        <span>1-6 of 23</span>
                    </div>
                    <div class="pagination-right">
                        <span>Page:</span>
                        <input type="number" class="pagination-input" value="1" min="1" max="2">
                        <span>of 2</span>
                        <button class="pagination-arrow" disabled><i class="fas fa-chevron-left"></i></button>
                        <button class="pagination-arrow"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
                </div>
            </div>

            <!-- Add Revenue Entry Modal -->
            <div id="add-revenue-modal" class="modal" style="display: none;">
                <div class="modal-overlay" onclick="closeAddRevenueModal()"></div>
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3 style="margin: 0; font-size: 18px;"><i class="fas fa-plus-circle" style="color: var(--primary-color); margin-right: 8px;"></i>Add Revenue Entry</h3>
                        <button class="modal-close" onclick="closeAddRevenueModal()"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="modal-body" style="padding: 20px;">
                        <form id="add-revenue-form">
                            <div style="display: grid; gap: 16px;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Date <span style="color: #dc2626;">*</span></label>
                                        <input type="date" id="revenue-date" required style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Time <span style="color: #dc2626;">*</span></label>
                                        <input type="time" id="revenue-time" required style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Transaction ID <span style="color: var(--text-secondary);">(Optional)</span></label>
                                    <input type="text" id="revenue-txn-id" placeholder="e.g., TXN_2026012446" style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Plan Name <span style="color: #dc2626;">*</span></label>
                                    <input type="text" id="revenue-plan" required placeholder="Enter plan name" style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Country <span style="color: #dc2626;">*</span></label>
                                    <input type="text" id="revenue-country" list="country-suggestions" required placeholder="Search or select country..." style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                    <datalist id="country-suggestions">
                                        <option value="Afghanistan">
                                        <option value="Albania">
                                        <option value="Algeria">
                                        <option value="Argentina">
                                        <option value="Australia">
                                        <option value="Austria">
                                        <option value="Bangladesh">
                                        <option value="Belgium">
                                        <option value="Brazil">
                                        <option value="Canada">
                                        <option value="Chile">
                                        <option value="China">
                                        <option value="Colombia">
                                        <option value="Czech Republic">
                                        <option value="Denmark">
                                        <option value="Egypt">
                                        <option value="Finland">
                                        <option value="France">
                                        <option value="Germany">
                                        <option value="Greece">
                                        <option value="Hong Kong">
                                        <option value="Hungary">
                                        <option value="India">
                                        <option value="Indonesia">
                                        <option value="Ireland">
                                        <option value="Israel">
                                        <option value="Italy">
                                        <option value="Japan">
                                        <option value="Kenya">
                                        <option value="Malaysia">
                                        <option value="Mexico">
                                        <option value="Netherlands">
                                        <option value="New Zealand">
                                        <option value="Nigeria">
                                        <option value="Norway">
                                        <option value="Pakistan">
                                        <option value="Peru">
                                        <option value="Philippines">
                                        <option value="Poland">
                                        <option value="Portugal">
                                        <option value="Romania">
                                        <option value="Russia">
                                        <option value="Saudi Arabia">
                                        <option value="Singapore">
                                        <option value="South Africa">
                                        <option value="South Korea">
                                        <option value="Spain">
                                        <option value="Sri Lanka">
                                        <option value="Sweden">
                                        <option value="Switzerland">
                                        <option value="Taiwan">
                                        <option value="Thailand">
                                        <option value="Turkey">
                                        <option value="Ukraine">
                                        <option value="United Arab Emirates">
                                        <option value="United Kingdom">
                                        <option value="United States">
                                        <option value="Vietnam">
                                    </datalist>
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Amount ($) <span style="color: #dc2626;">*</span></label>
                                    <input type="number" id="revenue-amount" required placeholder="e.g., 700" min="0" step="0.01" style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Source</label>
                                    <select id="revenue-source" style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                        <option value="Manual">Manual</option>
                                        <option value="Razorpay">Razorpay</option>
                                        <option value="PayPal">PayPal</option>
                                        <option value="Stripe">Stripe</option>
                                    </select>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer" style="padding: 16px 20px; border-top: 1px solid var(--border-color); display: flex; justify-content: flex-end; gap: 12px;">
                        <button type="button" onclick="closeAddRevenueModal()" style="padding: 10px 20px; border: 1px solid var(--border-color); border-radius: 6px; background: white; font-size: 13px; cursor: pointer;">Cancel</button>
                        <button type="submit" form="add-revenue-form" class="btn-primary" style="padding: 10px 20px;"><i class="fas fa-plus"></i> Add Entry</button>
                    </div>
                </div>
            </div>

            <!-- Edit Revenue Entry Modal -->
            <div id="edit-revenue-modal" class="modal" style="display: none;">
                <div class="modal-overlay" onclick="closeEditRevenueModal()"></div>
                <div class="modal-content" style="max-width: 500px;">
                    <div class="modal-header">
                        <h3 style="margin: 0; font-size: 18px;"><i class="fas fa-edit" style="color: var(--primary-color); margin-right: 8px;"></i>Edit Revenue Entry</h3>
                        <button class="modal-close" onclick="closeEditRevenueModal()"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="modal-body" style="padding: 20px;">
                        <form id="edit-revenue-form">
                            <div style="display: grid; gap: 16px;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Date <span style="color: #dc2626;">*</span></label>
                                        <input type="date" id="edit-revenue-date" required style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                    </div>
                                    <div>
                                        <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Time <span style="color: #dc2626;">*</span></label>
                                        <input type="time" id="edit-revenue-time" required style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                    </div>
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Transaction ID</label>
                                    <input type="text" id="edit-revenue-txn-id" style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Plan Name <span style="color: #dc2626;">*</span></label>
                                    <input type="text" id="edit-revenue-plan" required placeholder="Enter plan name" style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Country <span style="color: #dc2626;">*</span></label>
                                    <input type="text" id="edit-revenue-country" list="country-suggestions" required style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Amount ($) <span style="color: #dc2626;">*</span></label>
                                    <input type="number" id="edit-revenue-amount" required min="0" step="0.01" style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Source</label>
                                    <select id="edit-revenue-source" style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                        <option value="Manual">Manual</option>
                                        <option value="Razorpay">Razorpay</option>
                                        <option value="PayPal">PayPal</option>
                                        <option value="Stripe">Stripe</option>
                                    </select>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer" style="padding: 16px 20px; border-top: 1px solid var(--border-color); display: flex; justify-content: flex-end; gap: 12px;">
                        <button type="button" onclick="closeEditRevenueModal()" style="padding: 10px 20px; border: 1px solid var(--border-color); border-radius: 6px; background: white; font-size: 13px; cursor: pointer;">Cancel</button>
                        <button type="submit" form="edit-revenue-form" class="btn-primary" style="padding: 10px 20px;"><i class="fas fa-save"></i> Save Changes</button>
                    </div>
                </div>
            </div>

            <!-- Delete Confirmation Modal -->
            <div id="delete-confirm-modal" class="modal" style="display: none;">
                <div class="modal-overlay" onclick="closeDeleteModal()"></div>
                <div class="modal-content" style="max-width: 400px;">
                    <div class="modal-header" style="border-bottom: none; padding-bottom: 0;">
                        <h3 style="margin: 0; font-size: 18px;"><i class="fas fa-exclamation-triangle" style="color: #dc2626; margin-right: 8px;"></i>Confirm Delete</h3>
                        <button class="modal-close" onclick="closeDeleteModal()"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="modal-body" style="padding: 20px; text-align: center;">
                        <p style="color: var(--text-secondary); margin: 0 0 8px 0;">Are you sure you want to delete this entry?</p>
                        <p style="font-weight: 600; color: var(--text-color); margin: 0;" id="delete-entry-info">Transaction: TXN_XXXXXXXX</p>
                        <p style="color: #dc2626; font-size: 13px; margin: 16px 0 0 0;"><i class="fas fa-info-circle"></i> This action cannot be undone.</p>
                    </div>
                    <div class="modal-footer" style="padding: 16px 20px; border-top: 1px solid var(--border-color); display: flex; justify-content: center; gap: 12px;">
                        <button type="button" onclick="closeDeleteModal()" style="padding: 10px 24px; border: 1px solid var(--border-color); border-radius: 6px; background: white; font-size: 13px; cursor: pointer;">Cancel</button>
                        <button type="button" onclick="deleteEntry()" style="padding: 10px 24px; border: none; border-radius: 6px; background: #dc2626; color: white; font-size: 13px; cursor: pointer; font-weight: 500;"><i class="fas fa-trash"></i> Delete</button>
                    </div>
                </div>
            </div>

            <!-- Leads Data Section -->
            <div id="leads-data-section" class="table-section dashboard-section">
                <div class="table-header">
                    <h3><i class="fas fa-user-plus" style="color: var(--primary-color);"></i> Leads Data <span class="count">156 Leads</span></h3>
                    <button class="btn-primary" onclick="openAddLeadModal()"><i class="fas fa-plus"></i> Add Lead Manually</button>
                </div>

                <!-- Filters and Search -->
                <div style="padding: 16px 20px; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; gap: 16px; flex-wrap: wrap;">
                    <div style="display: flex; gap: 12px; align-items: center;">
                        <select class="table-status-filter" style="min-width: 130px;">
                            <option>All Time</option>
                            <option>Today</option>
                            <option>This Week</option>
                            <option selected>This Month</option>
                            <option>Last 30 Days</option>
                            <option>Last 90 Days</option>
                        </select>
                        <select class="table-status-filter" id="lead-source-filter" style="min-width: 150px;">
                            <option value="">All Sources</option>
                            <option value="facebook">Facebook Ads</option>
                            <option value="google">Google Ads</option>
                            <option value="organic">Organic</option>
                            <option value="referral">Referral</option>
                            <option value="direct">Direct</option>
                        </select>
                    </div>
                    <div style="position: relative; flex: 1; max-width: 300px;">
                        <i class="fas fa-search" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"></i>
                        <input type="text" placeholder="Search leads..." style="width: 100%; padding: 8px 12px 8px 36px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                    </div>
                </div>

                <!-- Leads Table -->
                <table id="leads-table" class="data-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Lead Count</th>
                            <th>Lead Source</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="leads-tbody">
                        <tr>
                            <td>Jan 24, 2026</td>
                            <td><strong>12</strong></td>
                            <td><span class="status-badge active">Facebook Ads</span></td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="action-menu-dropdown">
                                        <button class="action-menu-item" onclick="editLeadEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                                        <button class="action-menu-item delete" onclick="confirmDeleteLead(this)"><i class="fas fa-trash"></i> Delete</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Jan 23, 2026</td>
                            <td><strong>18</strong></td>
                            <td><span class="status-badge active">Facebook Ads</span></td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="action-menu-dropdown">
                                        <button class="action-menu-item" onclick="editLeadEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                                        <button class="action-menu-item delete" onclick="confirmDeleteLead(this)"><i class="fas fa-trash"></i> Delete</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Jan 22, 2026</td>
                            <td><strong>15</strong></td>
                            <td><span class="status-badge" style="background: #e7f3ff; color: var(--primary-color);">Organic</span></td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="action-menu-dropdown">
                                        <button class="action-menu-item" onclick="editLeadEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                                        <button class="action-menu-item delete" onclick="confirmDeleteLead(this)"><i class="fas fa-trash"></i> Delete</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Jan 21, 2026</td>
                            <td><strong>22</strong></td>
                            <td><span class="status-badge active">Facebook Ads</span></td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="action-menu-dropdown">
                                        <button class="action-menu-item" onclick="editLeadEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                                        <button class="action-menu-item delete" onclick="confirmDeleteLead(this)"><i class="fas fa-trash"></i> Delete</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Jan 20, 2026</td>
                            <td><strong>9</strong></td>
                            <td><span class="status-badge" style="background: #fef3c7; color: #92400e;">Google Ads</span></td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="action-menu-dropdown">
                                        <button class="action-menu-item" onclick="editLeadEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                                        <button class="action-menu-item delete" onclick="confirmDeleteLead(this)"><i class="fas fa-trash"></i> Delete</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Jan 19, 2026</td>
                            <td><strong>14</strong></td>
                            <td><span class="status-badge" style="background: #e7f3ff; color: var(--primary-color);">Organic</span></td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                                        <i class="fas fa-ellipsis-v"></i>
                                    </button>
                                    <div class="action-menu-dropdown">
                                        <button class="action-menu-item" onclick="editLeadEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                                        <button class="action-menu-item delete" onclick="confirmDeleteLead(this)"><i class="fas fa-trash"></i> Delete</button>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- Pagination -->
                <div class="table-pagination">
                    <div class="pagination-left">
                        <span>Rows per page:</span>
                        <select class="pagination-select">
                            <option value="10">10</option>
                            <option value="20" selected>20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                    <div class="pagination-center">
                        <span>1-6 of 156</span>
                    </div>
                    <div class="pagination-right">
                        <span>Page:</span>
                        <input type="number" class="pagination-input" value="1" min="1" max="8">
                        <span>of 8</span>
                        <button class="pagination-arrow" disabled><i class="fas fa-chevron-left"></i></button>
                        <button class="pagination-arrow"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>

            <!-- Add Lead Modal -->
            <div id="add-lead-modal" class="modal" style="display: none;">
                <div class="modal-overlay" onclick="closeAddLeadModal()"></div>
                <div class="modal-content" style="max-width: 450px;">
                    <div class="modal-header">
                        <h3 style="margin: 0; font-size: 18px;"><i class="fas fa-user-plus" style="color: var(--primary-color); margin-right: 8px;"></i>Add Lead Entry</h3>
                        <button class="modal-close" onclick="closeAddLeadModal()"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="modal-body" style="padding: 20px;">
                        <form id="add-lead-form">
                            <div style="display: grid; gap: 16px;">
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Date <span style="color: #dc2626;">*</span></label>
                                    <input type="date" id="lead-date" required style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Lead Count <span style="color: #dc2626;">*</span></label>
                                    <input type="number" id="lead-count" required min="1" placeholder="Enter number of leads" style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Lead Source <span style="color: #dc2626;">*</span></label>
                                    <select id="lead-source" required style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                        <option value="">Select a source...</option>
                                        <option value="Facebook Ads">Facebook Ads</option>
                                        <option value="Google Ads">Google Ads</option>
                                        <option value="Organic">Organic</option>
                                        <option value="Referral">Referral</option>
                                        <option value="Direct">Direct</option>
                                    </select>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer" style="padding: 16px 20px; border-top: 1px solid var(--border-color); display: flex; gap: 12px; justify-content: flex-end;">
                        <button type="button" onclick="closeAddLeadModal()" style="padding: 10px 20px; border: 1px solid var(--border-color); background: white; border-radius: 6px; cursor: pointer; font-size: 14px;">Cancel</button>
                        <button type="button" onclick="addLeadEntry()" class="btn-primary" style="padding: 10px 20px;">Add Entry</button>
                    </div>
                </div>
            </div>

            <!-- Edit Lead Modal -->
            <div id="edit-lead-modal" class="modal" style="display: none;">
                <div class="modal-overlay" onclick="closeEditLeadModal()"></div>
                <div class="modal-content" style="max-width: 450px;">
                    <div class="modal-header">
                        <h3 style="margin: 0; font-size: 18px;"><i class="fas fa-edit" style="color: var(--primary-color); margin-right: 8px;"></i>Edit Lead Entry</h3>
                        <button class="modal-close" onclick="closeEditLeadModal()"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="modal-body" style="padding: 20px;">
                        <form id="edit-lead-form">
                            <div style="display: grid; gap: 16px;">
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Date <span style="color: #dc2626;">*</span></label>
                                    <input type="date" id="edit-lead-date" required style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Lead Count <span style="color: #dc2626;">*</span></label>
                                    <input type="number" id="edit-lead-count" required min="1" style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                </div>
                                <div>
                                    <label style="display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: var(--text-color);">Lead Source <span style="color: #dc2626;">*</span></label>
                                    <select id="edit-lead-source" required style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 13px;">
                                        <option value="">Select a source...</option>
                                        <option value="Facebook Ads">Facebook Ads</option>
                                        <option value="Google Ads">Google Ads</option>
                                        <option value="Organic">Organic</option>
                                        <option value="Referral">Referral</option>
                                        <option value="Direct">Direct</option>
                                    </select>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer" style="padding: 16px 20px; border-top: 1px solid var(--border-color); display: flex; gap: 12px; justify-content: flex-end;">
                        <button type="button" onclick="closeEditLeadModal()" style="padding: 10px 20px; border: 1px solid var(--border-color); background: white; border-radius: 6px; cursor: pointer; font-size: 14px;">Cancel</button>
                        <button type="button" onclick="saveLeadEntry()" class="btn-primary" style="padding: 10px 20px;">Save Changes</button>
                    </div>
                </div>
            </div>

            <!-- Delete Lead Confirmation Modal -->
            <div id="delete-lead-modal" class="modal" style="display: none;">
                <div class="modal-overlay" onclick="closeDeleteLeadModal()"></div>
                <div class="modal-content" style="max-width: 400px;">
                    <div class="modal-header">
                        <h3 style="margin: 0; font-size: 18px;"><i class="fas fa-exclamation-triangle" style="color: #dc2626; margin-right: 8px;"></i>Delete Entry</h3>
                        <button class="modal-close" onclick="closeDeleteLeadModal()"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="modal-body" style="padding: 20px;">
                        <p style="margin: 0; color: var(--text-secondary);">Are you sure you want to delete this lead entry? This action cannot be undone.</p>
                    </div>
                    <div class="modal-footer" style="padding: 16px 20px; border-top: 1px solid var(--border-color); display: flex; gap: 12px; justify-content: flex-end;">
                        <button type="button" onclick="closeDeleteLeadModal()" style="padding: 10px 20px; border: 1px solid var(--border-color); background: white; border-radius: 6px; cursor: pointer; font-size: 14px;">Cancel</button>
                        <button type="button" onclick="deleteLeadEntry()" style="padding: 10px 20px; background: #dc2626; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 14px;">Delete</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // ==================== MULTI-ACCOUNT DATA STORE ====================
        // Each ad account has its own complete dataset
        const accountData = {
            connect: {
                name: 'Pabbly Connect',
                icon: 'fa-plug',
                color: 'linear-gradient(135deg, #1877f2, #42b72a)',
                accountId: 'act_123456789',
                metrics: {
                    totalSpend: '$12,345.67',
                    totalRevenue: '$16,100',
                    roas: '1.31',
                    totalLeads: '234',
                    costPerLead: '$52.76',
                    pixelStatus: 'Active'
                },
                campaigns: [
                    { name: 'USA - Lifetime Deal', status: 'Active', budget: '$1,200.00', spend: '$4,523.45', sales: 8, revenue: '$5,600', roas: '1.24', frequency: '1.8', outboundClicks: '3,245', reach: '125,400', impressions: '225,720' },
                    { name: 'EU - Subscription Q1', status: 'Active', budget: '$850.00', spend: '$3,212.89', sales: 5, revenue: '$3,500', roas: '1.09', frequency: '2.1', outboundClicks: '2,456', reach: '78,900', impressions: '165,690' },
                    { name: 'India - Growth', status: 'Active', budget: '$600.00', spend: '$2,156.78', sales: 6, revenue: '$4,200', roas: '1.95', frequency: '1.5', outboundClicks: '2,890', reach: '98,500', impressions: '147,750' },
                    { name: 'APAC - Awareness', status: 'Paused', budget: '$500.00', spend: '$1,890.00', sales: 3, revenue: '$2,100', roas: '1.11', frequency: '2.4', outboundClicks: '1,234', reach: '45,600', impressions: '109,440' },
                    { name: 'Global - Retargeting', status: 'Active', budget: '$200.00', spend: '$562.55', sales: 1, revenue: '$700', roas: '1.24', frequency: '1.2', outboundClicks: '567', reach: '23,400', impressions: '28,080' }
                ],
                adSets: [
                    { name: 'Interests - Tech Entrepreneurs', campaignName: 'USA - Lifetime Deal', status: 'Active', budget: '$600.00', spend: '$2,100.00', sales: 5, revenue: '$3,500', roas: '1.67', frequency: '1.6', outboundClicks: '1,890', reach: '72,500', impressions: '116,000' },
                    { name: 'Lookalike - Purchasers 1%', campaignName: 'USA - Lifetime Deal', status: 'Active', budget: '$400.00', spend: '$1,450.00', sales: 3, revenue: '$2,100', roas: '1.45', frequency: '1.8', outboundClicks: '1,355', reach: '52,900', impressions: '95,220' },
                    { name: 'Interests - Business Owners', campaignName: 'India - Growth', status: 'Active', budget: '$250.00', spend: '$890.00', sales: 2, revenue: '$1,400', roas: '1.57', frequency: '1.4', outboundClicks: '978', reach: '38,200', impressions: '53,480' },
                    { name: 'Broad - General Audience', campaignName: 'EU - Subscription Q1', status: 'Paused', budget: '$350.00', spend: '$1,200.00', sales: 1, revenue: '$700', roas: '0.58', frequency: '2.8', outboundClicks: '756', reach: '28,500', impressions: '79,800' },
                    { name: 'Retargeting - Website Visitors', campaignName: 'APAC - Awareness', status: 'Paused', budget: '$200.00', spend: '$650.00', sales: 0, revenue: '$0', roas: '0.00', frequency: '3.2', outboundClicks: '423', reach: '15,200', impressions: '48,640' }
                ],
                ads: [
                    { name: 'Video Ad v3 - Feature Demo', campaignName: 'USA - Lifetime Deal', adSetName: 'Interests - Tech Entrepreneurs', status: 'Active', budget: '$350.00', spend: '$1,200.00', sales: 4, revenue: '$2,800', roas: '2.33', frequency: '1.5', outboundClicks: '1,124', reach: '42,300', impressions: '63,450' },
                    { name: 'Image Ad - Testimonial', campaignName: 'USA - Lifetime Deal', adSetName: 'Lookalike - Purchasers 1%', status: 'Active', budget: '$250.00', spend: '$850.00', sales: 2, revenue: '$1,400', roas: '1.65', frequency: '1.7', outboundClicks: '823', reach: '31,200', impressions: '53,040' },
                    { name: 'Carousel Ad - Features', campaignName: 'India - Growth', adSetName: 'Interests - Business Owners', status: 'Active', budget: '$200.00', spend: '$650.00', sales: 1, revenue: '$700', roas: '1.08', frequency: '1.3', outboundClicks: '612', reach: '24,500', impressions: '31,850' },
                    { name: 'Static Image - Old Creative', campaignName: 'EU - Subscription Q1', adSetName: 'Broad - General Audience', status: 'Paused', budget: '$150.00', spend: '$450.00', sales: 0, revenue: '$0', roas: '0.00', frequency: '2.9', outboundClicks: '345', reach: '12,300', impressions: '35,670' },
                    { name: 'Video Ad v1 - Outdated', campaignName: 'APAC - Awareness', adSetName: 'Retargeting - Website Visitors', status: 'Paused', budget: '$120.00', spend: '$380.00', sales: 0, revenue: '$0', roas: '0.00', frequency: '3.5', outboundClicks: '234', reach: '8,900', impressions: '31,150' }
                ],
                countries: [
                    { name: 'United States', flag: 'us', sales: 10, revenue: '$7,000', spend: '$5,234.56', roas: '1.34' },
                    { name: 'United Kingdom', flag: 'gb', sales: 4, revenue: '$2,800', spend: '$2,156.78', roas: '1.30' },
                    { name: 'India', flag: 'in', sales: 6, revenue: '$4,200', spend: '$2,100.00', roas: '2.00' },
                    { name: 'Germany', flag: 'de', sales: 2, revenue: '$1,400', spend: '$1,456.89', roas: '0.96' },
                    { name: 'Canada', flag: 'ca', sales: 1, revenue: '$700', spend: '$897.44', roas: '0.78' }
                ],
                alerts: [
                    { type: 'warning', level: 'Campaign', name: 'EU - Subscription Q1', spend: '$3,212.89', roas: '1.09', threshold: '$2,800' },
                    { type: 'critical', level: 'Ad Set', name: 'Germany - Interests', spend: '$1,456.89', roas: '0.96', threshold: '$1,400' },
                    { type: 'warning', level: 'Country', name: 'Canada', spend: '$897.44', roas: '0.78', threshold: '$700' }
                ],
                recentSales: [
                    { time: '10 min ago', campaign: 'USA - Lifetime Deal', adSet: 'Interests - Tech', adName: 'Video Ad v3', country: 'United States', amount: '$700' },
                    { time: '2 hours ago', campaign: 'USA - Lifetime Deal', adSet: 'Lookalike - Customers', adName: 'Image Ad - Features', country: 'United States', amount: '$700' },
                    { time: '5 hours ago', campaign: 'India - Growth', adSet: 'Interests - Startups', adName: 'Carousel Ad', country: 'India', amount: '$700' }
                ],
                webhookUrl: 'https://chat.googleapis.com/v1/spaces/ABC123/messages?key=xyz_connect',
                todayRevenue: '$2,100',
                weekRevenue: '$8,400',
                monthRevenue: '$16,100',
                revenueTransactions: [
                    { date: 'Jan 24, 2026 - 10:15 AM', txnId: 'TXN_PC_2026012401', customer: 'john.doe@email.com', product: 'Pabbly Connect', country: 'United States', flag: 'us', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 24, 2026 - 8:30 AM', txnId: 'TXN_PC_2026012402', customer: 'sarah.smith@company.com', product: 'Pabbly Connect', country: 'United States', flag: 'us', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 24, 2026 - 6:45 AM', txnId: 'TXN_PC_2026012403', customer: 'mike.jones@business.co.uk', product: 'Pabbly Connect', country: 'United Kingdom', flag: 'gb', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 23, 2026 - 11:20 PM', txnId: 'TXN_PC_2026012304', customer: 'emma.wilson@startup.ca', product: 'Pabbly Connect', country: 'Canada', flag: 'ca', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 23, 2026 - 9:15 PM', txnId: 'TXN_PC_2026012305', customer: 'hans.mueller@firma.de', product: 'Pabbly Connect', country: 'Germany', flag: 'de', amount: '$700', source: 'Webhook' }
                ],
                leads: [
                    { date: 'Jan 24, 2026', source: 'Facebook Ads', count: 45 },
                    { date: 'Jan 23, 2026', source: 'Facebook Ads', count: 38 },
                    { date: 'Jan 22, 2026', source: 'Google Ads', count: 52 },
                    { date: 'Jan 21, 2026', source: 'Organic', count: 28 },
                    { date: 'Jan 20, 2026', source: 'Facebook Ads', count: 41 },
                    { date: 'Jan 19, 2026', source: 'Referral', count: 22 }
                ],
                todayLeads: 45,
                weekLeads: 156,
                monthLeads: 234
            },
            chatflow: {
                name: 'Pabbly Chatflow',
                icon: 'fa-comments',
                color: 'linear-gradient(135deg, #6366f1, #8b5cf6)',
                accountId: 'act_987654321',
                metrics: {
                    totalSpend: '$8,756.23',
                    totalRevenue: '$11,900',
                    roas: '1.36',
                    totalLeads: '189',
                    costPerLead: '$46.33',
                    pixelStatus: 'Active'
                },
                campaigns: [
                    { name: 'WhatsApp Marketing - USA', status: 'Active', budget: '$900.00', spend: '$3,245.67', sales: 7, revenue: '$4,900', roas: '1.51', frequency: '1.6', outboundClicks: '2,876', reach: '95,400', impressions: '152,640' },
                    { name: 'Chat Automation - Global', status: 'Active', budget: '$750.00', spend: '$2,890.12', sales: 5, revenue: '$3,500', roas: '1.21', frequency: '1.9', outboundClicks: '2,234', reach: '72,300', impressions: '137,370' },
                    { name: 'Bot Builder - EU', status: 'Active', budget: '$700.00', spend: '$2,620.44', sales: 5, revenue: '$3,500', roas: '1.34', frequency: '1.7', outboundClicks: '2,045', reach: '68,500', impressions: '116,450' },
                    { name: 'LATAM - Chatbot Trial', status: 'Paused', budget: '$300.00', spend: '$890.00', sales: 1, revenue: '$700', roas: '0.79', frequency: '2.6', outboundClicks: '567', reach: '21,200', impressions: '55,120' }
                ],
                adSets: [
                    { name: 'SMB Owners', campaignName: 'WhatsApp Marketing - USA', status: 'Active', budget: '$500.00', spend: '$1,800.00', sales: 4, revenue: '$2,800', roas: '1.56', frequency: '1.5', outboundClicks: '1,654', reach: '56,800', impressions: '85,200' },
                    { name: 'E-commerce', campaignName: 'Chat Automation - Global', status: 'Active', budget: '$400.00', spend: '$1,500.00', sales: 3, revenue: '$2,100', roas: '1.40', frequency: '1.8', outboundClicks: '1,345', reach: '42,500', impressions: '76,500' },
                    { name: 'Tech Startups', campaignName: 'Bot Builder - EU', status: 'Active', budget: '$350.00', spend: '$1,200.00', sales: 2, revenue: '$1,400', roas: '1.17', frequency: '1.6', outboundClicks: '1,123', reach: '38,900', impressions: '62,240' },
                    { name: 'Spanish Speakers', campaignName: 'LATAM - Chatbot Trial', status: 'Paused', budget: '$150.00', spend: '$450.00', sales: 0, revenue: '$0', roas: '0.00', frequency: '2.8', outboundClicks: '312', reach: '11,500', impressions: '32,200' }
                ],
                ads: [
                    { name: 'Demo Video', campaignName: 'WhatsApp Marketing - USA', adSetName: 'SMB Owners', status: 'Active', budget: '$280.00', spend: '$950.00', sales: 3, revenue: '$2,100', roas: '2.21', frequency: '1.4', outboundClicks: '923', reach: '32,400', impressions: '45,360' },
                    { name: 'Chatbot Preview', campaignName: 'Chat Automation - Global', adSetName: 'E-commerce', status: 'Active', budget: '$220.00', spend: '$780.00', sales: 2, revenue: '$1,400', roas: '1.79', frequency: '1.7', outboundClicks: '756', reach: '24,500', impressions: '41,650' },
                    { name: 'Feature Highlight', campaignName: 'Bot Builder - EU', adSetName: 'Tech Startups', status: 'Active', budget: '$180.00', spend: '$620.00', sales: 1, revenue: '$700', roas: '1.13', frequency: '1.5', outboundClicks: '589', reach: '21,300', impressions: '31,950' },
                    { name: 'Spanish Ad - Low Performance', campaignName: 'LATAM - Chatbot Trial', adSetName: 'Spanish Speakers', status: 'Paused', budget: '$100.00', spend: '$320.00', sales: 0, revenue: '$0', roas: '0.00', frequency: '3.1', outboundClicks: '187', reach: '6,800', impressions: '21,080' }
                ],
                countries: [
                    { name: 'United States', flag: 'us', sales: 7, revenue: '$4,900', spend: '$3,456.78', roas: '1.42' },
                    { name: 'Brazil', flag: 'br', sales: 4, revenue: '$2,800', spend: '$1,890.45', roas: '1.48' },
                    { name: 'United Kingdom', flag: 'gb', sales: 3, revenue: '$2,100', spend: '$1,678.90', roas: '1.25' },
                    { name: 'Mexico', flag: 'mx', sales: 2, revenue: '$1,400', spend: '$980.10', roas: '1.43' },
                    { name: 'Spain', flag: 'es', sales: 1, revenue: '$700', spend: '$750.00', roas: '0.93' }
                ],
                alerts: [
                    { type: 'warning', level: 'Country', name: 'Spain', spend: '$750.00', roas: '0.93', threshold: '$700' },
                    { type: 'info', level: 'Campaign', name: 'WhatsApp Marketing - USA', spend: '$3,245.67', roas: '1.51', threshold: 'Budget increase recommended' }
                ],
                recentSales: [
                    { time: '25 min ago', campaign: 'WhatsApp Marketing - USA', adSet: 'SMB Owners', adName: 'Demo Video', country: 'United States', amount: '$700' },
                    { time: '3 hours ago', campaign: 'Chat Automation - Global', adSet: 'E-commerce', adName: 'Chatbot Preview', country: 'Brazil', amount: '$700' },
                    { time: '6 hours ago', campaign: 'Bot Builder - EU', adSet: 'Tech Startups', adName: 'Feature Highlight', country: 'United Kingdom', amount: '$700' }
                ],
                webhookUrl: 'https://chat.googleapis.com/v1/spaces/DEF456/messages?key=xyz_chatflow',
                todayRevenue: '$1,400',
                weekRevenue: '$5,600',
                monthRevenue: '$11,900',
                revenueTransactions: [
                    { date: 'Jan 24, 2026 - 9:45 AM', txnId: 'TXN_CF_2026012401', customer: 'carlos.garcia@empresa.mx', product: 'Pabbly Chatflow', country: 'Mexico', flag: 'mx', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 24, 2026 - 7:30 AM', txnId: 'TXN_CF_2026012402', customer: 'maria.silva@negocio.br', product: 'Pabbly Chatflow', country: 'Brazil', flag: 'br', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 23, 2026 - 10:20 PM', txnId: 'TXN_CF_2026012303', customer: 'james.wilson@agency.com', product: 'Pabbly Chatflow', country: 'United States', flag: 'us', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 23, 2026 - 6:15 PM', txnId: 'TXN_CF_2026012304', customer: 'pablo.martinez@comercio.es', product: 'Pabbly Chatflow', country: 'Spain', flag: 'es', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 23, 2026 - 2:45 PM', txnId: 'TXN_CF_2026012305', customer: 'david.brown@tech.co.uk', product: 'Pabbly Chatflow', country: 'United Kingdom', flag: 'gb', amount: '$700', source: 'Webhook' }
                ],
                leads: [
                    { date: 'Jan 24, 2026', source: 'Facebook Ads', count: 32 },
                    { date: 'Jan 23, 2026', source: 'Facebook Ads', count: 28 },
                    { date: 'Jan 22, 2026', source: 'Google Ads', count: 35 },
                    { date: 'Jan 21, 2026', source: 'Organic', count: 22 },
                    { date: 'Jan 20, 2026', source: 'Facebook Ads', count: 40 }
                ],
                todayLeads: 32,
                weekLeads: 117,
                monthLeads: 189
            },
            email: {
                name: 'Pabbly Email Marketing',
                icon: 'fa-envelope',
                color: 'linear-gradient(135deg, #10b981, #059669)',
                accountId: 'act_456789123',
                metrics: {
                    totalSpend: '$5,432.10',
                    totalRevenue: '$7,700',
                    roas: '1.42',
                    totalLeads: '312',
                    costPerLead: '$17.41',
                    pixelStatus: 'Active'
                },
                campaigns: [
                    { name: 'Email Automation - SMB', status: 'Active', budget: '$800.00', spend: '$2,876.54', sales: 6, revenue: '$4,200', roas: '1.46', frequency: '1.4', outboundClicks: '2,456', reach: '89,200', impressions: '124,880' },
                    { name: 'Newsletter Tools - Creators', status: 'Active', budget: '$700.00', spend: '$2,555.56', sales: 5, revenue: '$3,500', roas: '1.37', frequency: '1.8', outboundClicks: '2,123', reach: '67,400', impressions: '121,320' },
                    { name: 'Cold Email - Enterprise', status: 'Paused', budget: '$400.00', spend: '$1,120.00', sales: 1, revenue: '$700', roas: '0.63', frequency: '2.9', outboundClicks: '678', reach: '23,400', impressions: '67,860' }
                ],
                adSets: [
                    { name: 'Marketers', campaignName: 'Email Automation - SMB', status: 'Active', budget: '$450.00', spend: '$1,500.00', sales: 4, revenue: '$2,800', roas: '1.87', frequency: '1.3', outboundClicks: '1,423', reach: '52,300', impressions: '67,990' },
                    { name: 'Content Creators', campaignName: 'Newsletter Tools - Creators', status: 'Active', budget: '$380.00', spend: '$1,300.00', sales: 3, revenue: '$2,100', roas: '1.62', frequency: '1.6', outboundClicks: '1,234', reach: '42,100', impressions: '67,360' },
                    { name: 'Enterprise IT', campaignName: 'Cold Email - Enterprise', status: 'Paused', budget: '$200.00', spend: '$600.00', sales: 0, revenue: '$0', roas: '0.00', frequency: '3.0', outboundClicks: '389', reach: '12,800', impressions: '38,400' }
                ],
                ads: [
                    { name: 'Email Builder Demo', campaignName: 'Email Automation - SMB', adSetName: 'Marketers', status: 'Active', budget: '$250.00', spend: '$800.00', sales: 3, revenue: '$2,100', roas: '2.63', frequency: '1.2', outboundClicks: '834', reach: '31,200', impressions: '37,440' },
                    { name: 'Template Gallery', campaignName: 'Newsletter Tools - Creators', adSetName: 'Content Creators', status: 'Active', budget: '$200.00', spend: '$700.00', sales: 2, revenue: '$1,400', roas: '2.00', frequency: '1.5', outboundClicks: '712', reach: '24,500', impressions: '36,750' },
                    { name: 'Enterprise Features Ad', campaignName: 'Cold Email - Enterprise', adSetName: 'Enterprise IT', status: 'Paused', budget: '$130.00', spend: '$420.00', sales: 0, revenue: '$0', roas: '0.00', frequency: '3.2', outboundClicks: '245', reach: '7,800', impressions: '24,960' }
                ],
                countries: [
                    { name: 'United States', flag: 'us', sales: 5, revenue: '$3,500', spend: '$2,345.67', roas: '1.49' },
                    { name: 'India', flag: 'in', sales: 4, revenue: '$2,800', spend: '$1,567.89', roas: '1.79' },
                    { name: 'United Kingdom', flag: 'gb', sales: 2, revenue: '$1,400', spend: '$1,018.54', roas: '1.37' }
                ],
                alerts: [
                    { type: 'info', level: 'Campaign', name: 'Email Automation - SMB', spend: '$2,876.54', roas: '1.46', threshold: 'Performing well' }
                ],
                recentSales: [
                    { time: '45 min ago', campaign: 'Email Automation - SMB', adSet: 'Marketers', adName: 'Email Builder Demo', country: 'United States', amount: '$700' },
                    { time: '4 hours ago', campaign: 'Newsletter Tools - Creators', adSet: 'Content Creators', adName: 'Template Gallery', country: 'India', amount: '$700' }
                ],
                webhookUrl: 'https://chat.googleapis.com/v1/spaces/GHI789/messages?key=xyz_email',
                todayRevenue: '$1,400',
                weekRevenue: '$4,200',
                monthRevenue: '$7,700',
                revenueTransactions: [
                    { date: 'Jan 24, 2026 - 11:30 AM', txnId: 'TXN_EM_2026012401', customer: 'marketing@startup.io', product: 'Pabbly Email Marketing', country: 'United States', flag: 'us', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 24, 2026 - 9:15 AM', txnId: 'TXN_EM_2026012402', customer: 'newsletter@creator.in', product: 'Pabbly Email Marketing', country: 'India', flag: 'in', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 23, 2026 - 7:45 PM', txnId: 'TXN_EM_2026012303', customer: 'campaigns@agency.co.uk', product: 'Pabbly Email Marketing', country: 'United Kingdom', flag: 'gb', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 23, 2026 - 3:20 PM', txnId: 'TXN_EM_2026012304', customer: 'growth@saas.com', product: 'Pabbly Email Marketing', country: 'United States', flag: 'us', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 22, 2026 - 11:00 AM', txnId: 'TXN_EM_2026012205', customer: 'outreach@business.in', product: 'Pabbly Email Marketing', country: 'India', flag: 'in', amount: '$700', source: 'Webhook' }
                ],
                leads: [
                    { date: 'Jan 24, 2026', source: 'Facebook Ads', count: 58, campaign: 'Email Automation - SMB', notes: 'High volume' },
                    { date: 'Jan 23, 2026', source: 'Facebook Ads', count: 62, campaign: 'Newsletter Tools - Creators', notes: 'Content creators' },
                    { date: 'Jan 22, 2026', source: 'Organic', count: 45, campaign: 'N/A', notes: 'SEO traffic' },
                    { date: 'Jan 21, 2026', source: 'Facebook Ads', count: 71, campaign: 'Email Automation - SMB', notes: 'Best performing day' },
                    { date: 'Jan 20, 2026', source: 'Facebook Ads', count: 48, campaign: 'Newsletter Tools - Creators', notes: 'Stable quality' }
                ],
                todayLeads: 58,
                weekLeads: 234,
                monthLeads: 312
            },
            psb: {
                name: 'Pabbly PSB',
                icon: 'fa-credit-card',
                color: 'linear-gradient(135deg, #f59e0b, #ef4444)',
                accountId: 'act_321654987',
                metrics: {
                    totalSpend: '$9,876.54',
                    totalRevenue: '$14,000',
                    roas: '1.42',
                    totalLeads: '156',
                    costPerLead: '$63.31',
                    pixelStatus: 'Active'
                },
                campaigns: [
                    { name: 'Subscription Billing - SaaS', status: 'Active', budget: '$1,100.00', spend: '$4,123.45', sales: 9, revenue: '$6,300', roas: '1.53', frequency: '1.5', outboundClicks: '3,567', reach: '112,500', impressions: '168,750' },
                    { name: 'Payment Gateway - Global', status: 'Active', budget: '$950.00', spend: '$3,456.78', sales: 6, revenue: '$4,200', roas: '1.22', frequency: '2.0', outboundClicks: '2,789', reach: '76,400', impressions: '152,800' },
                    { name: 'Invoice Management - SMB', status: 'Active', budget: '$550.00', spend: '$1,890.31', sales: 4, revenue: '$2,800', roas: '1.48', frequency: '1.3', outboundClicks: '1,678', reach: '58,200', impressions: '75,660' },
                    { name: 'Recurring Payments - EU', status: 'Paused', budget: '$150.00', spend: '$406.00', sales: 1, revenue: '$700', roas: '1.72', frequency: '1.1', outboundClicks: '456', reach: '18,900', impressions: '20,790' }
                ],
                adSets: [
                    { name: 'SaaS Companies', campaignName: 'Subscription Billing - SaaS', status: 'Active', budget: '$600.00', spend: '$2,200.00', sales: 5, revenue: '$3,500', roas: '1.59', frequency: '1.4', outboundClicks: '2,134', reach: '67,800', impressions: '94,920' },
                    { name: 'E-commerce Stores', campaignName: 'Payment Gateway - Global', status: 'Active', budget: '$500.00', spend: '$1,800.00', sales: 3, revenue: '$2,100', roas: '1.17', frequency: '1.9', outboundClicks: '1,567', reach: '42,300', impressions: '80,370' },
                    { name: 'Small Business', campaignName: 'Invoice Management - SMB', status: 'Active', budget: '$300.00', spend: '$1,000.00', sales: 2, revenue: '$1,400', roas: '1.40', frequency: '1.2', outboundClicks: '987', reach: '34,500', impressions: '41,400' },
                    { name: 'European Businesses', campaignName: 'Recurring Payments - EU', status: 'Paused', budget: '$150.00', spend: '$406.00', sales: 1, revenue: '$700', roas: '1.72', frequency: '1.1', outboundClicks: '456', reach: '18,900', impressions: '20,790' }
                ],
                ads: [
                    { name: 'Billing Demo Video', campaignName: 'Subscription Billing - SaaS', adSetName: 'SaaS Companies', status: 'Active', budget: '$320.00', spend: '$1,100.00', sales: 4, revenue: '$2,800', roas: '2.55', frequency: '1.3', outboundClicks: '1,234', reach: '38,500', impressions: '50,050' },
                    { name: 'Payment Flow Image', campaignName: 'Payment Gateway - Global', adSetName: 'E-commerce Stores', status: 'Active', budget: '$260.00', spend: '$900.00', sales: 2, revenue: '$1,400', roas: '1.56', frequency: '1.8', outboundClicks: '923', reach: '24,600', impressions: '44,280' },
                    { name: 'Invoice Carousel', campaignName: 'Invoice Management - SMB', adSetName: 'Small Business', status: 'Active', budget: '$150.00', spend: '$500.00', sales: 1, revenue: '$700', roas: '1.40', frequency: '1.1', outboundClicks: '534', reach: '19,200', impressions: '21,120' },
                    { name: 'EU Recurring Video', campaignName: 'Recurring Payments - EU', adSetName: 'European Businesses', status: 'Paused', budget: '$100.00', spend: '$280.00', sales: 1, revenue: '$700', roas: '2.50', frequency: '1.0', outboundClicks: '312', reach: '12,400', impressions: '12,400' }
                ],
                countries: [
                    { name: 'United States', flag: 'us', sales: 8, revenue: '$5,600', spend: '$4,234.56', roas: '1.32' },
                    { name: 'Australia', flag: 'au', sales: 5, revenue: '$3,500', spend: '$2,345.67', roas: '1.49' },
                    { name: 'United Kingdom', flag: 'gb', sales: 4, revenue: '$2,800', spend: '$1,890.31', roas: '1.48' },
                    { name: 'Germany', flag: 'de', sales: 2, revenue: '$1,400', spend: '$906.00', roas: '1.55' },
                    { name: 'France', flag: 'fr', sales: 1, revenue: '$700', spend: '$500.00', roas: '1.40' }
                ],
                alerts: [
                    { type: 'info', level: 'Campaign', name: 'Subscription Billing - SaaS', spend: '$4,123.45', roas: '1.53', threshold: 'Top performer - increase budget' },
                    { type: 'warning', level: 'Campaign', name: 'Payment Gateway - Global', spend: '$3,456.78', roas: '1.22', threshold: '$2,800' }
                ],
                recentSales: [
                    { time: '15 min ago', campaign: 'Subscription Billing - SaaS', adSet: 'SaaS Founders', adName: 'Billing Dashboard Demo', country: 'United States', amount: '$700' },
                    { time: '1 hour ago', campaign: 'Payment Gateway - Global', adSet: 'E-commerce', adName: 'Payment Flow Video', country: 'Australia', amount: '$700' },
                    { time: '3 hours ago', campaign: 'Invoice Management - SMB', adSet: 'Small Business', adName: 'Invoice Generator', country: 'United Kingdom', amount: '$700' }
                ],
                webhookUrl: 'https://chat.googleapis.com/v1/spaces/JKL012/messages?key=xyz_psb',
                todayRevenue: '$2,100',
                weekRevenue: '$7,000',
                monthRevenue: '$14,000',
                revenueTransactions: [
                    { date: 'Jan 24, 2026 - 10:45 AM', txnId: 'TXN_PSB_2026012401', customer: 'billing@saascompany.com', product: 'Pabbly PSB', country: 'United States', flag: 'us', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 24, 2026 - 8:20 AM', txnId: 'TXN_PSB_2026012402', customer: 'subscriptions@tech.au', product: 'Pabbly PSB', country: 'Australia', flag: 'au', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 24, 2026 - 5:30 AM', txnId: 'TXN_PSB_2026012403', customer: 'payments@ecommerce.co.uk', product: 'Pabbly PSB', country: 'United Kingdom', flag: 'gb', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 23, 2026 - 9:15 PM', txnId: 'TXN_PSB_2026012304', customer: 'invoicing@startup.de', product: 'Pabbly PSB', country: 'Germany', flag: 'de', amount: '$700', source: 'Webhook' },
                    { date: 'Jan 23, 2026 - 4:45 PM', txnId: 'TXN_PSB_2026012305', customer: 'recurring@business.fr', product: 'Pabbly PSB', country: 'France', flag: 'fr', amount: '$700', source: 'Webhook' }
                ],
                leads: [
                    { date: 'Jan 24, 2026', source: 'Facebook Ads', count: 28, campaign: 'Subscription Billing - SaaS', notes: 'SaaS founders' },
                    { date: 'Jan 23, 2026', source: 'Facebook Ads', count: 32, campaign: 'Payment Gateway - Global', notes: 'E-commerce' },
                    { date: 'Jan 22, 2026', source: 'Facebook Ads', count: 25, campaign: 'Invoice Management - SMB', notes: 'Small business' },
                    { date: 'Jan 21, 2026', source: 'Organic', count: 18, campaign: 'N/A', notes: 'Direct traffic' },
                    { date: 'Jan 20, 2026', source: 'Facebook Ads', count: 35, campaign: 'Subscription Billing - SaaS', notes: 'High intent' }
                ],
                todayLeads: 28,
                weekLeads: 103,
                monthLeads: 156
            }
        };

        // Current active account
        let currentAccount = 'connect';

        // Current status filters for each table (independent filtering)
        let campaignsStatusFilter = 'active';
        let adSetsStatusFilter = 'active';
        let adsStatusFilter = 'active';

        // Update table count display
        function updateTableCount(sectionSelector, count, filter) {
            const section = document.querySelector(sectionSelector);
            if (section) {
                const countSpan = section.querySelector('.count');
                if (countSpan) {
                    const statusLabel = filter === 'all' ? 'Total' : filter.charAt(0).toUpperCase() + filter.slice(1);
                    countSpan.textContent = count + ' ' + statusLabel;
                }
            }
        }

        // Toggle Account Dropdown
        function toggleAccountDropdown() {
            const dropdown = document.getElementById('accountDropdown');
            const btn = document.querySelector('.account-switcher-btn');
            dropdown.classList.toggle('show');
            btn.classList.toggle('open');
        }

        // Switch Account - Updates ALL dashboard data
        function switchAccount(accountName, accountType) {
            currentAccount = accountType;
            const data = accountData[accountType];

            // Update button text
            document.getElementById('currentAccountName').textContent = accountName;

            // Update active state in dropdown
            document.querySelectorAll('.account-option').forEach(option => {
                option.classList.remove('active');
            });
            event.currentTarget.classList.add('active');

            // Update icon
            const iconMap = {
                'connect': 'fa-plug',
                'chatflow': 'fa-comments',
                'email': 'fa-envelope',
                'psb': 'fa-credit-card'
            };
            const accountIcon = document.querySelector('.account-switcher-btn .account-icon i');
            accountIcon.className = 'fas ' + iconMap[accountType];

            // Update icon background
            const iconDiv = document.querySelector('.account-switcher-btn .account-icon');
            iconDiv.style.background = data.color;

            // Close dropdown
            document.getElementById('accountDropdown').classList.remove('show');
            document.querySelector('.account-switcher-btn').classList.remove('open');

            // Show loading indicator
            const refreshBtn = document.querySelector('.refresh-btn');
            const icon = refreshBtn.querySelector('i');
            icon.classList.add('fa-spin');
            document.querySelector('.last-sync').textContent = 'Switching account...';

            // Update all dashboard data
            setTimeout(() => {
                updateDashboardData(data);
                icon.classList.remove('fa-spin');
                document.querySelector('.last-sync').textContent = 'Last synced: Just now';
            }, 500);
        }

        // Update all dashboard sections with account data
        function updateDashboardData(data) {
            // Update Metrics Cards
            updateMetricsCards(data.metrics);

            // Update Campaigns Table (with its own filter)
            const filteredCampaigns = data.campaigns.filter(c => campaignsStatusFilter === 'all' || c.status.toLowerCase() === campaignsStatusFilter);
            updateCampaignsTable(filteredCampaigns);
            updateTableCount('#campaigns-section', filteredCampaigns.length, campaignsStatusFilter);

            // Update Ad Sets Table (with its own filter)
            const filteredAdSets = data.adSets.filter(a => adSetsStatusFilter === 'all' || a.status.toLowerCase() === adSetsStatusFilter);
            updateAdSetsTable(filteredAdSets);
            updateTableCount('#adsets-section', filteredAdSets.length, adSetsStatusFilter);

            // Update Ads Table (with its own filter)
            const filteredAds = data.ads.filter(a => adsStatusFilter === 'all' || a.status.toLowerCase() === adsStatusFilter);
            updateAdsTable(filteredAds);
            updateTableCount('#ads-section', filteredAds.length, adsStatusFilter);

            // Update Countries Table
            updateCountriesTable(data.countries);

            // Update Alerts
            updateAlerts(data.alerts, data.name);

            // Update Recent Sales
            updateRecentSales(data.recentSales);

            // Update Revenue Cards
            updateRevenueCards(data);

            // Update Pabbly Revenue Transactions (Data Management)
            updateRevenueTransactions(data);

            // Update Leads Data (Data Management)
            updateLeadsData(data);

            // Update Settings Account Info
            updateSettingsInfo(data);
        }

        // Update Metrics Cards
        function updateMetricsCards(metrics) {
            const cards = document.querySelectorAll('.metric-card');
            if (cards.length >= 6) {
                cards[0].querySelector('.metric-value').textContent = metrics.totalSpend;
                cards[1].querySelector('.metric-value').textContent = metrics.totalRevenue;
                cards[2].querySelector('.metric-value').textContent = metrics.roas;
                // cards[3] is Total Sales - we'll skip for now as it's static
                // cards[4] is Total Leads with CPL
                const totalLeadsEl = document.getElementById('total-leads-value');
                const cplEl = document.getElementById('cpl-value');
                if (totalLeadsEl) totalLeadsEl.textContent = metrics.totalLeads;
                if (cplEl) cplEl.textContent = metrics.costPerLead;
                // Pixel status is cards[5]
                const pixelCard = cards[5];
                if (pixelCard) {
                    const pixelStatus = pixelCard.querySelector('.pixel-status span:last-child');
                    if (pixelStatus) pixelStatus.textContent = metrics.pixelStatus;
                }
            }
        }

        // Update Campaigns Table
        function updateCampaignsTable(campaigns) {
            const tbody = document.querySelector('#campaigns-section tbody');
            if (!tbody) return;

            tbody.innerHTML = campaigns.map(campaign => `
                <tr>
                    <td><span class="status-badge ${campaign.status.toLowerCase()}">${campaign.status}</span></td>
                    <td><strong>${campaign.name}</strong></td>
                    <td>${campaign.budget || '$0.00'}</td>
                    <td>${campaign.spend}</td>
                    <td>${campaign.sales}</td>
                    <td>${campaign.revenue}</td>
                    <td><span class="roas-value ${parseFloat(campaign.roas) >= 1.5 ? 'good' : parseFloat(campaign.roas) >= 1.0 ? 'warning' : 'bad'}">${campaign.roas}</span></td>
                    <td>${campaign.frequency}</td>
                    <td>${campaign.outboundClicks || '0'}</td>
                    <td>${campaign.reach || '0'}</td>
                    <td>${campaign.impressions || '0'}</td>
                </tr>
            `).join('');
        }

        // Update Ad Sets Table
        function updateAdSetsTable(adSets) {
            const tbody = document.querySelector('#adsets-section tbody');
            if (!tbody) return;

            tbody.innerHTML = adSets.map(adSet => `
                <tr>
                    <td><span class="status-badge ${adSet.status.toLowerCase()}">${adSet.status}</span></td>
                    <td>
                        <span class="name-with-tooltip" data-tooltip="Campaign: ${adSet.campaignName}">
                            <strong>${adSet.name}</strong>
                        </span>
                    </td>
                    <td>${adSet.budget || '$0.00'}</td>
                    <td>${adSet.spend}</td>
                    <td>${adSet.sales}</td>
                    <td>${adSet.revenue}</td>
                    <td><span class="roas-value ${parseFloat(adSet.roas) >= 1.5 ? 'good' : parseFloat(adSet.roas) >= 1.0 ? 'warning' : 'bad'}">${adSet.roas}</span></td>
                    <td>${adSet.frequency}</td>
                    <td>${adSet.outboundClicks || '0'}</td>
                    <td>${adSet.reach || '0'}</td>
                    <td>${adSet.impressions || '0'}</td>
                </tr>
            `).join('');
        }

        // Update Ads Table
        function updateAdsTable(ads) {
            const tbody = document.querySelector('#ads-section tbody');
            if (!tbody) return;

            tbody.innerHTML = ads.map(ad => `
                <tr>
                    <td><span class="status-badge ${ad.status.toLowerCase()}">${ad.status}</span></td>
                    <td>
                        <span class="name-with-tooltip" data-tooltip="Campaign: ${ad.campaignName} | Ad Set: ${ad.adSetName}">
                            <strong>${ad.name}</strong>
                        </span>
                    </td>
                    <td>${ad.budget || '$0.00'}</td>
                    <td>${ad.spend}</td>
                    <td>${ad.sales}</td>
                    <td>${ad.revenue}</td>
                    <td><span class="roas-value ${parseFloat(ad.roas) >= 1.5 ? 'good' : parseFloat(ad.roas) >= 1.0 ? 'warning' : 'bad'}">${ad.roas}</span></td>
                    <td>${ad.frequency}</td>
                    <td>${ad.outboundClicks || '0'}</td>
                    <td>${ad.reach || '0'}</td>
                    <td>${ad.impressions || '0'}</td>
                </tr>
            `).join('');
        }

        // Update Countries Table
        function updateCountriesTable(countries) {
            const tbody = document.querySelector('#country-section tbody');
            if (!tbody) return;

            tbody.innerHTML = countries.map(country => `
                <tr>
                    <td>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <img src="https://flagcdn.com/24x18/${country.flag}.png" alt="${country.name}">
                            <strong>${country.name}</strong>
                        </div>
                    </td>
                    <td>${country.spend}</td>
                    <td><strong>${country.sales}</strong></td>
                    <td><strong>${country.revenue}</strong></td>
                    <td><span class="roas-badge ${parseFloat(country.roas) >= 1.5 ? 'good' : parseFloat(country.roas) >= 1.0 ? 'warning' : 'bad'}">${country.roas}</span></td>
                </tr>
            `).join('');
        }

        // Update Alerts Section
        function updateAlerts(alerts, accountName) {
            const alertsList = document.querySelector('#alerts-section .alerts-list, #alerts-section .table-container');
            if (!alertsList) return;

            // Update alert count badge
            const alertBadge = document.querySelector('.nav-item .badge');
            if (alertBadge) alertBadge.textContent = alerts.length;

            // Update alerts header with account name
            const alertsHeader = document.querySelector('#alerts-section .table-header h3');
            if (alertsHeader) {
                const countSpan = alertsHeader.querySelector('.count');
                if (countSpan) countSpan.textContent = alerts.length + ' Active';
            }
        }

        // Update Recent Sales
        function updateRecentSales(sales) {
            const salesSection = document.querySelector('#sales-creative-section tbody');
            if (!salesSection) return;

            salesSection.innerHTML = sales.map((sale, index) => `
                <tr ${index === 0 ? 'style="background: #faf5ff;"' : ''}>
                    <td>
                        <div style="width: 60px; height: 60px; border-radius: 8px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;">
                            <i class="fas fa-image"></i>
                        </div>
                    </td>
                    <td><strong>${sale.campaign}</strong></td>
                    <td>${sale.adSet}</td>
                    <td>${sale.adName}</td>
                    <td>
                        <div style="display: flex; align-items: center; gap: 6px;">
                            <img src="https://flagcdn.com/24x18/${sale.country === 'United States' ? 'us' : sale.country === 'India' ? 'in' : sale.country === 'Brazil' ? 'br' : sale.country === 'United Kingdom' ? 'gb' : sale.country === 'Australia' ? 'au' : 'us'}.png" alt="${sale.country}">
                            ${sale.country}
                        </div>
                    </td>
                    <td><strong style="color: #22c55e;">${sale.amount}</strong></td>
                    <td style="color: var(--text-secondary);">${sale.time}</td>
                </tr>
            `).join('');
        }

        // Update Revenue Cards in Pabbly Revenue Section
        function updateRevenueCards(data) {
            const revenueCards = document.querySelectorAll('#pabbly-revenue-section .metric-card, #pabbly-revenue-section [style*="grid-template-columns"] > div');
            // Update the revenue summary cards if they exist
            const todayCard = document.querySelector('#pabbly-revenue-section [style*="grid-template-columns"] > div:first-child');
            if (todayCard) {
                const valueEl = todayCard.querySelector('[style*="font-size: 28px"]');
                if (valueEl) valueEl.textContent = data.todayRevenue;
            }
        }

        // Update Settings Info
        function updateSettingsInfo(data) {
            // Update webhook URL display if visible
            const webhookInput = document.querySelector('#settings-section input[placeholder*="webhook"]');
            if (webhookInput) {
                webhookInput.value = data.webhookUrl || '';
            }

            // Update account ID displays
            const accountIdElements = document.querySelectorAll('[data-account-id]');
            accountIdElements.forEach(el => {
                el.textContent = data.accountId;
            });
        }

        // Update Revenue Transactions (Pabbly Revenue Data Section)
        function updateRevenueTransactions(data) {
            // Update Revenue Summary Cards using IDs
            const todayEl = document.getElementById('revenue-today');
            const weekEl = document.getElementById('revenue-week');
            const monthEl = document.getElementById('revenue-month');
            const roasEl = document.getElementById('revenue-roas');

            if (todayEl) todayEl.textContent = data.todayRevenue;
            if (weekEl) weekEl.textContent = data.weekRevenue;
            if (monthEl) monthEl.textContent = data.monthRevenue;
            if (roasEl) roasEl.textContent = data.metrics.roas;

            // Update Revenue Transactions Table using ID
            const tbody = document.getElementById('revenue-transactions-tbody');
            if (tbody && data.revenueTransactions) {
                tbody.innerHTML = data.revenueTransactions.map((txn, index) => `
                    <tr ${index === 0 ? 'style="background: #faf5ff;"' : ''}>
                        <td>
                            <div>${txn.date.split(' - ')[0]}</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">${txn.date.split(' - ')[1] || ''}</div>
                        </td>
                        <td><code style="background: #f3f4f6; padding: 2px 6px; border-radius: 4px; font-size: 12px;">${txn.txnId}</code></td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                ${index === 0 ? '<span style="background: #dcfce7; color: #166534; padding: 2px 6px; border-radius: 4px; font-size: 10px; font-weight: 600;">NEW</span>' : ''}
                                ${txn.customer}
                            </div>
                        </td>
                        <td><strong>${txn.product}</strong></td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 6px;">
                                <img src="https://flagcdn.com/24x18/${txn.flag}.png" alt="${txn.country}">
                                ${txn.country}
                            </div>
                        </td>
                        <td><strong style="color: #166534;">${txn.amount}</strong></td>
                        <td><span class="status-badge" style="background: #f3e8ff; color: #7c3aed;">PSB ${txn.source}</span></td>
                        <td><button class="action-btn view">View</button></td>
                    </tr>
                `).join('');
            }

            // Update transaction count in pagination using ID
            const paginationText = document.getElementById('revenue-pagination-text');
            if (paginationText && data.revenueTransactions) {
                paginationText.textContent = `Showing 1-${Math.min(5, data.revenueTransactions.length)} of ${data.revenueTransactions.length} transactions`;
            }
        }

        // Update Leads Data Section
        function updateLeadsData(data) {
            // Update header lead count
            const leadsSection = document.getElementById('leads-data-section');
            if (leadsSection) {
                const headerSpan = leadsSection.querySelector('.table-header span[style*="color: var(--text-secondary)"]');
                if (headerSpan) {
                    headerSpan.innerHTML = `<i class="fas fa-users"></i> ${data.monthLeads} leads this month`;
                }
            }

            // Update Leads Summary Cards using IDs
            const todayEl = document.getElementById('leads-today');
            const weekEl = document.getElementById('leads-week');
            const monthEl = document.getElementById('leads-month');
            const cplEl = document.getElementById('leads-cpl');

            if (todayEl) todayEl.textContent = data.todayLeads;
            if (weekEl) weekEl.textContent = data.weekLeads;
            if (monthEl) monthEl.textContent = data.monthLeads;
            if (cplEl) cplEl.textContent = data.metrics.costPerLead;

            // Update Leads Table using ID
            const tbody = document.getElementById('leads-tbody');
            if (tbody && data.leads) {
                tbody.innerHTML = data.leads.map(lead => {
                    let badgeStyle = '';
                    if (lead.source === 'Facebook Ads') {
                        badgeStyle = 'class="status-badge active"';
                    } else if (lead.source === 'Google Ads') {
                        badgeStyle = 'class="status-badge" style="background: #fef3c7; color: #92400e;"';
                    } else if (lead.source === 'Organic') {
                        badgeStyle = 'class="status-badge" style="background: #e7f3ff; color: var(--primary-color);"';
                    } else if (lead.source === 'Referral') {
                        badgeStyle = 'class="status-badge" style="background: #dcfce7; color: #166534;"';
                    } else {
                        badgeStyle = 'class="status-badge" style="background: #f3f4f6; color: #374151;"';
                    }
                    return `
                    <tr>
                        <td>${lead.date}</td>
                        <td><strong>${lead.count}</strong></td>
                        <td><span ${badgeStyle}>${lead.source}</span></td>
                        <td>
                            <div class="action-menu">
                                <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                                    <i class="fas fa-ellipsis-v"></i>
                                </button>
                                <div class="action-menu-dropdown">
                                    <button class="action-menu-item" onclick="editLeadEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                                    <button class="action-menu-item delete" onclick="confirmDeleteLead(this)"><i class="fas fa-trash"></i> Delete</button>
                                </div>
                            </div>
                        </td>
                    </tr>
                `}).join('');
            }
        }

        // Close account dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const switcher = document.querySelector('.account-switcher');
            if (!switcher.contains(event.target)) {
                document.getElementById('accountDropdown').classList.remove('show');
                document.querySelector('.account-switcher-btn').classList.remove('open');
            }
        });

        // Switch Tabs
        // Show Section (for navigation between dashboard sections)
        function showSection(sectionId, clickedElement) {
            console.log('showSection called with:', sectionId);

            // Dashboard sections that should show the filter bar (Time Range, Refresh)
            const dashboardSections = [
                'metrics-section',
                'campaigns-section',
                'adsets-section',
                'ads-section',
                'country-section',
                'sales-creative-section'
            ];

            const isDashboardSection = dashboardSections.includes(sectionId);
            const filterBar = document.querySelector('.filter-bar');
            const metricsSection = document.getElementById('metrics-section');

            // Show filter bar ONLY for dashboard sections
            if (filterBar) {
                filterBar.style.display = isDashboardSection ? 'flex' : 'none';
            }

            // Hide all dashboard sections first
            document.querySelectorAll('.dashboard-section').forEach(section => {
                section.classList.remove('active');
                section.style.display = '';
            });

            // Metric cards should ONLY show on Overview Metrics page
            if (metricsSection) {
                if (sectionId === 'metrics-section') {
                    // Show metrics cards only for Overview Metrics
                    metricsSection.style.display = 'grid';
                    metricsSection.classList.add('active');
                } else {
                    // Hide metrics cards for ALL other sections
                    metricsSection.style.display = 'none';
                    metricsSection.classList.remove('active');
                }
            }

            // Show the selected section
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.add('active');
                console.log('Section found and activated:', sectionId);
            } else {
                console.error('Section not found:', sectionId);
            }

            // Remove active class from all submenu items and nav-items
            document.querySelectorAll('.submenu-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Add active class to clicked element
            if (clickedElement) {
                clickedElement.classList.add('active');
            }

            // Scroll to top of content area
            const dashboardContent = document.querySelector('.dashboard-content');
            if (dashboardContent) {
                dashboardContent.scrollTop = 0;
            }
        }

        // Task Management Functions
        function switchTaskTab(tabId) {
            // Hide all task content
            document.querySelectorAll('.task-content').forEach(content => {
                content.classList.remove('active');
            });

            // Show selected tab content
            const targetContent = document.getElementById(tabId);
            if (targetContent) {
                targetContent.classList.add('active');
            }

            // Update tab button styles
            document.querySelectorAll('.task-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Add active class to clicked tab
            event.target.closest('.task-tab').classList.add('active');
        }

        function toggleTask(headerElement) {
            const taskItem = headerElement.closest('.task-item');
            taskItem.classList.toggle('expanded');
        }

        // Show Threshold Tab (for switching between Campaign/Ad Set/Ads/Country tabs)
        function showThresholdTab(tabId, clickedButton) {
            // Hide all threshold content
            document.querySelectorAll('.threshold-content').forEach(content => {
                content.style.display = 'none';
                content.classList.remove('active');
            });

            // Show the selected tab content
            const targetTab = document.getElementById(tabId);
            if (targetTab) {
                targetTab.style.display = 'block';
                targetTab.classList.add('active');
            }

            // Update tab button styles
            document.querySelectorAll('.threshold-tab').forEach(tab => {
                tab.style.fontWeight = '500';
                tab.style.color = 'var(--text-secondary)';
                tab.style.borderBottom = 'none';
                tab.classList.remove('active');
            });

            // Style the clicked tab as active
            if (clickedButton) {
                clickedButton.style.fontWeight = '600';
                clickedButton.style.color = 'var(--primary-color)';
                clickedButton.style.borderBottom = '2px solid var(--primary-color)';
                clickedButton.classList.add('active');
            }
        }

        function switchTab(tabId) {
            // Remove active from all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Hide all tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Activate clicked tab button
            event.target.closest('.tab-btn').classList.add('active');

            // Show selected tab content
            document.getElementById(tabId).classList.add('active');
        }

        // Toggle Submenu
        function toggleSubmenu(element) {
            const submenu = element.nextElementSibling;
            const isExpanded = element.classList.contains('expanded');

            // Toggle current submenu
            element.classList.toggle('expanded');
            submenu.classList.toggle('open');

            // Update active state
            document.querySelectorAll('.nav-item-parent').forEach(item => {
                if (item !== element) {
                    item.classList.remove('active');
                }
            });
            element.classList.add('active');
        }

        // Toggle Notification Panel
        function toggleNotifications() {
            const panel = document.getElementById('notificationPanel');
            panel.classList.toggle('show');
        }

        // Close notification panel when clicking outside
        document.addEventListener('click', function(event) {
            const panel = document.getElementById('notificationPanel');
            const bellIcon = document.querySelector('.header-icon');

            if (!panel.contains(event.target) && !bellIcon.contains(event.target)) {
                panel.classList.remove('show');
            }
        });

        // Add Revenue Entry Modal Functions
        function openAddRevenueModal() {
            const modal = document.getElementById('add-revenue-modal');
            modal.style.display = 'flex';

            // Set current date and time
            const now = new Date();
            const dateInput = document.getElementById('revenue-date');
            const timeInput = document.getElementById('revenue-time');

            // Format date as YYYY-MM-DD
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            dateInput.value = `${year}-${month}-${day}`;

            // Format time as HH:MM
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            timeInput.value = `${hours}:${minutes}`;
        }

        function closeAddRevenueModal() {
            const modal = document.getElementById('add-revenue-modal');
            modal.style.display = 'none';
            document.getElementById('add-revenue-form').reset();
        }

        // Action Menu Functions
        let currentEditRow = null;
        let currentDeleteRow = null;

        function toggleActionMenu(button) {
            // Close all other open menus
            document.querySelectorAll('.action-menu.open').forEach(menu => {
                if (menu !== button.parentElement) {
                    menu.classList.remove('open');
                }
            });
            // Toggle current menu
            button.parentElement.classList.toggle('open');
        }

        // Close action menus when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.action-menu')) {
                document.querySelectorAll('.action-menu.open').forEach(menu => {
                    menu.classList.remove('open');
                });
            }
        });

        // Edit Revenue Entry
        function editRevenueEntry(button) {
            const row = button.closest('tr');
            currentEditRow = row;

            // Get data from row
            const cells = row.querySelectorAll('td');
            const dateText = cells[0].querySelector('div').textContent;
            const timeText = cells[0].querySelectorAll('div')[1].textContent;
            const txnId = cells[1].querySelector('code').textContent;
            const plan = cells[2].querySelector('strong').textContent;
            const country = cells[3].textContent.trim();
            const amount = cells[4].querySelector('strong').textContent.replace('$', '').replace(',', '');
            const source = cells[5].querySelector('span').textContent;

            // Parse date (e.g., "Jan 24, 2026" to "2026-01-24")
            const dateParts = dateText.match(/(\w+)\s+(\d+),\s+(\d+)/);
            if (dateParts) {
                const months = { Jan: '01', Feb: '02', Mar: '03', Apr: '04', May: '05', Jun: '06', Jul: '07', Aug: '08', Sep: '09', Oct: '10', Nov: '11', Dec: '12' };
                const formattedDate = `${dateParts[3]}-${months[dateParts[1]]}-${dateParts[2].padStart(2, '0')}`;
                document.getElementById('edit-revenue-date').value = formattedDate;
            }

            // Parse time (e.g., "3:45 PM" to "15:45")
            const timeParts = timeText.match(/(\d+):(\d+)\s*(AM|PM)/i);
            if (timeParts) {
                let hours = parseInt(timeParts[1]);
                if (timeParts[3].toUpperCase() === 'PM' && hours !== 12) hours += 12;
                if (timeParts[3].toUpperCase() === 'AM' && hours === 12) hours = 0;
                document.getElementById('edit-revenue-time').value = `${String(hours).padStart(2, '0')}:${timeParts[2]}`;
            }

            document.getElementById('edit-revenue-txn-id').value = txnId;
            document.getElementById('edit-revenue-plan').value = plan;
            document.getElementById('edit-revenue-country').value = country;
            document.getElementById('edit-revenue-amount').value = parseFloat(amount);
            document.getElementById('edit-revenue-source').value = source;

            // Close action menu and show modal
            button.closest('.action-menu').classList.remove('open');
            document.getElementById('edit-revenue-modal').style.display = 'flex';
        }

        function closeEditRevenueModal() {
            document.getElementById('edit-revenue-modal').style.display = 'none';
            document.getElementById('edit-revenue-form').reset();
            currentEditRow = null;
        }

        // Delete Entry
        function confirmDeleteEntry(button) {
            const row = button.closest('tr');
            currentDeleteRow = row;

            const txnId = row.querySelectorAll('td')[1].querySelector('code').textContent;
            const plan = row.querySelectorAll('td')[2].querySelector('strong').textContent;

            document.getElementById('delete-entry-info').innerHTML = `<strong>${plan}</strong><br><span style="font-size: 12px; color: var(--text-secondary);">${txnId}</span>`;

            // Close action menu and show modal
            button.closest('.action-menu').classList.remove('open');
            document.getElementById('delete-confirm-modal').style.display = 'flex';
        }

        function closeDeleteModal() {
            document.getElementById('delete-confirm-modal').style.display = 'none';
            currentDeleteRow = null;
        }

        function deleteEntry() {
            if (currentDeleteRow) {
                currentDeleteRow.remove();
                closeDeleteModal();
                // Update entry count (optional)
                const countSpan = document.querySelector('#pabbly-revenue-section .table-section:last-child .table-header .count');
                if (countSpan) {
                    const currentCount = parseInt(countSpan.textContent) || 23;
                    countSpan.textContent = `${currentCount - 1} Entries`;
                }
            }
        }

        // ==================== LEAD MANAGEMENT FUNCTIONS ====================
        let currentEditLeadRow = null;
        let currentDeleteLeadRow = null;

        function openAddLeadModal() {
            // Set default date to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('lead-date').value = today;
            document.getElementById('lead-count').value = '';
            document.getElementById('lead-source').value = '';
            document.getElementById('add-lead-modal').style.display = 'flex';
        }

        function closeAddLeadModal() {
            document.getElementById('add-lead-modal').style.display = 'none';
        }

        function addLeadEntry() {
            const date = document.getElementById('lead-date').value;
            const count = document.getElementById('lead-count').value;
            const source = document.getElementById('lead-source').value;

            if (!date || !count || !source) {
                alert('Please fill in all required fields');
                return;
            }

            // Format date
            const dateObj = new Date(date);
            const formattedDate = dateObj.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });

            // Get source badge style
            let badgeStyle = '';
            if (source === 'Facebook Ads') {
                badgeStyle = 'class="status-badge active"';
            } else if (source === 'Google Ads') {
                badgeStyle = 'class="status-badge" style="background: #fef3c7; color: #92400e;"';
            } else if (source === 'Organic') {
                badgeStyle = 'class="status-badge" style="background: #e7f3ff; color: var(--primary-color);"';
            } else if (source === 'Referral') {
                badgeStyle = 'class="status-badge" style="background: #dcfce7; color: #166534;"';
            } else {
                badgeStyle = 'class="status-badge" style="background: #f3f4f6; color: #374151;"';
            }

            // Create new row
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td>${formattedDate}</td>
                <td><strong>${count}</strong></td>
                <td><span ${badgeStyle}>${source}</span></td>
                <td>
                    <div class="action-menu">
                        <button class="action-menu-btn" onclick="toggleActionMenu(this)">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                        <div class="action-menu-dropdown">
                            <button class="action-menu-item" onclick="editLeadEntry(this)"><i class="fas fa-edit"></i> Edit</button>
                            <button class="action-menu-item delete" onclick="confirmDeleteLead(this)"><i class="fas fa-trash"></i> Delete</button>
                        </div>
                    </div>
                </td>
            `;

            // Add to top of table
            const tbody = document.getElementById('leads-tbody');
            tbody.insertBefore(newRow, tbody.firstChild);

            // Update lead count
            const countSpan = document.querySelector('#leads-data-section .table-header .count');
            if (countSpan) {
                const currentCount = parseInt(countSpan.textContent) || 156;
                countSpan.textContent = `${currentCount + 1} Leads`;
            }

            closeAddLeadModal();
        }

        function editLeadEntry(button) {
            const row = button.closest('tr');
            currentEditLeadRow = row;

            // Close the action menu
            button.closest('.action-menu').classList.remove('open');

            // Get current values from the row
            const cells = row.querySelectorAll('td');
            const dateText = cells[0].textContent.trim();
            const count = cells[1].textContent.trim();
            const source = cells[2].querySelector('.status-badge').textContent.trim();

            // Parse date to input format
            const dateObj = new Date(dateText);
            const formattedDate = dateObj.toISOString().split('T')[0];

            // Populate the edit form
            document.getElementById('edit-lead-date').value = formattedDate;
            document.getElementById('edit-lead-count').value = count;
            document.getElementById('edit-lead-source').value = source;

            // Show the edit modal
            document.getElementById('edit-lead-modal').style.display = 'flex';
        }

        function closeEditLeadModal() {
            document.getElementById('edit-lead-modal').style.display = 'none';
            currentEditLeadRow = null;
        }

        function saveLeadEntry() {
            if (!currentEditLeadRow) return;

            const date = document.getElementById('edit-lead-date').value;
            const count = document.getElementById('edit-lead-count').value;
            const source = document.getElementById('edit-lead-source').value;

            if (!date || !count || !source) {
                alert('Please fill in all required fields');
                return;
            }

            // Format date
            const dateObj = new Date(date);
            const formattedDate = dateObj.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });

            // Get source badge style
            let badgeStyle = '';
            if (source === 'Facebook Ads') {
                badgeStyle = 'class="status-badge active"';
            } else if (source === 'Google Ads') {
                badgeStyle = 'class="status-badge" style="background: #fef3c7; color: #92400e;"';
            } else if (source === 'Organic') {
                badgeStyle = 'class="status-badge" style="background: #e7f3ff; color: var(--primary-color);"';
            } else if (source === 'Referral') {
                badgeStyle = 'class="status-badge" style="background: #dcfce7; color: #166534;"';
            } else {
                badgeStyle = 'class="status-badge" style="background: #f3f4f6; color: #374151;"';
            }

            // Update the row
            const cells = currentEditLeadRow.querySelectorAll('td');
            cells[0].textContent = formattedDate;
            cells[1].innerHTML = `<strong>${count}</strong>`;
            cells[2].innerHTML = `<span ${badgeStyle}>${source}</span>`;

            closeEditLeadModal();
        }

        function confirmDeleteLead(button) {
            const row = button.closest('tr');
            currentDeleteLeadRow = row;

            // Close the action menu
            button.closest('.action-menu').classList.remove('open');

            // Show delete confirmation modal
            document.getElementById('delete-lead-modal').style.display = 'flex';
        }

        function closeDeleteLeadModal() {
            document.getElementById('delete-lead-modal').style.display = 'none';
            currentDeleteLeadRow = null;
        }

        function deleteLeadEntry() {
            if (currentDeleteLeadRow) {
                currentDeleteLeadRow.remove();
                closeDeleteLeadModal();
                // Update lead count
                const countSpan = document.querySelector('#leads-data-section .table-header .count');
                if (countSpan) {
                    const currentCount = parseInt(countSpan.textContent) || 156;
                    countSpan.textContent = `${currentCount - 1} Leads`;
                }
            }
        }

        // Close modals on Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeAddRevenueModal();
                closeEditRevenueModal();
                closeDeleteModal();
                closeAddLeadModal();
                closeEditLeadModal();
                closeDeleteLeadModal();
            }
        });

        // Table sorting functionality
        document.querySelectorAll('.data-table th').forEach(header => {
            header.addEventListener('click', function() {
                const table = this.closest('table');
                const tbody = table.querySelector('tbody');
                const rows = Array.from(tbody.querySelectorAll('tr'));
                const index = Array.from(this.parentNode.children).indexOf(this);
                const isAscending = this.classList.contains('sorted-asc');

                // Remove sorted class from all headers
                table.querySelectorAll('th').forEach(th => {
                    th.classList.remove('sorted', 'sorted-asc', 'sorted-desc');
                });

                // Sort rows
                rows.sort((a, b) => {
                    const aValue = a.children[index].textContent.trim();
                    const bValue = b.children[index].textContent.trim();

                    // Try to parse as number
                    const aNum = parseFloat(aValue.replace(/[$,]/g, ''));
                    const bNum = parseFloat(bValue.replace(/[$,]/g, ''));

                    if (!isNaN(aNum) && !isNaN(bNum)) {
                        return isAscending ? aNum - bNum : bNum - aNum;
                    }

                    return isAscending ? aValue.localeCompare(bValue) : bValue.localeCompare(aValue);
                });

                // Update header class
                this.classList.add('sorted');
                this.classList.add(isAscending ? 'sorted-desc' : 'sorted-asc');

                // Update sort icon
                const icon = this.querySelector('.sort-icon');
                if (icon) {
                    icon.className = 'fas sort-icon ' + (isAscending ? 'fa-sort-up' : 'fa-sort-down');
                }

                // Reorder rows
                rows.forEach(row => tbody.appendChild(row));
            });
        });


        // Filter change handler for Campaigns table
        document.getElementById('campaigns-status-filter').addEventListener('change', function() {
            campaignsStatusFilter = this.value;
            updateFilterColor(this);
            applyCampaignsFilter();
        });

        // Filter change handler for Ad Sets table
        document.getElementById('adsets-status-filter').addEventListener('change', function() {
            adSetsStatusFilter = this.value;
            updateFilterColor(this);
            applyAdSetsFilter();
        });

        // Filter change handler for Ads table
        document.getElementById('ads-status-filter').addEventListener('change', function() {
            adsStatusFilter = this.value;
            updateFilterColor(this);
            applyAdsFilter();
        });

        // Update filter dropdown color based on selected value
        function updateFilterColor(selectElement) {
            selectElement.classList.remove('filter-active', 'filter-paused', 'filter-all');
            selectElement.classList.add('filter-' + selectElement.value);
        }

        // Apply Campaigns filter
        function applyCampaignsFilter() {
            const data = accountData[currentAccount];
            const filteredCampaigns = filterByStatus(data.campaigns, campaignsStatusFilter);
            updateCampaignsTable(filteredCampaigns);
            updateTableCount('#campaigns-section', filteredCampaigns.length, campaignsStatusFilter);
        }

        // Apply Ad Sets filter
        function applyAdSetsFilter() {
            const data = accountData[currentAccount];
            const filteredAdSets = filterByStatus(data.adSets, adSetsStatusFilter);
            updateAdSetsTable(filteredAdSets);
            updateTableCount('#adsets-section', filteredAdSets.length, adSetsStatusFilter);
        }

        // Apply Ads filter
        function applyAdsFilter() {
            const data = accountData[currentAccount];
            const filteredAds = filterByStatus(data.ads, adsStatusFilter);
            updateAdsTable(filteredAds);
            updateTableCount('#ads-section', filteredAds.length, adsStatusFilter);
        }

        // Filter data by status
        function filterByStatus(items, filter) {
            if (filter === 'all') {
                return items;
            }
            return items.filter(item => item.status.toLowerCase() === filter);
        }

        // Other filter change handlers (Time Range, etc.)
        document.querySelectorAll('.filter-select:not(#status-filter)').forEach(select => {
            select.addEventListener('change', function() {
                // In a real app, this would trigger a data refresh
                console.log('Filter changed:', this.value);
            });
        });

        // Refresh button
        document.querySelector('.refresh-btn').addEventListener('click', function() {
            const icon = this.querySelector('i');
            icon.classList.add('fa-spin');

            // Simulate data refresh
            setTimeout(() => {
                icon.classList.remove('fa-spin');
                document.querySelector('.last-sync').textContent = 'Last synced: Just now';
            }, 1500);
        });

        // Initialize dashboard with current account data and filters on page load
        (function initializeDashboard() {
            const data = accountData[currentAccount];

            // Apply initial filter colors
            const campaignsFilter = document.getElementById('campaigns-status-filter');
            const adSetsFilter = document.getElementById('adsets-status-filter');
            const adsFilter = document.getElementById('ads-status-filter');

            updateFilterColor(campaignsFilter);
            updateFilterColor(adSetsFilter);
            updateFilterColor(adsFilter);

            // Apply initial filters to all tables
            applyCampaignsFilter();
            applyAdSetsFilter();
            applyAdsFilter();

            // Update other sections
            updateMetricsCards(data.metrics);
            updateCountriesTable(data.countries);
            updateAlerts(data.alerts, data.name);
            updateRecentSales(data.recentSales);
            updateRevenueCards(data);
            updateRevenueTransactions(data);
            updateLeadsData(data);
        })();

        // Creative Preview Modal Functionality
        (function() {
            const modal = document.getElementById('creative-preview-modal');
            const modalImage = document.getElementById('creative-preview-image');
            const modalClose = document.querySelector('.creative-modal-close');

            // Open modal when clicking on creative thumbnail
            document.querySelectorAll('.creative-thumbnail').forEach(thumbnail => {
                thumbnail.addEventListener('click', function() {
                    const previewUrl = this.getAttribute('data-preview');
                    if (previewUrl && modal && modalImage) {
                        modalImage.src = previewUrl;
                        modal.classList.add('show');
                    }
                });
            });

            // Close modal when clicking the close button
            if (modalClose) {
                modalClose.addEventListener('click', function() {
                    modal.classList.remove('show');
                });
            }

            // Close modal when clicking outside the image
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.classList.remove('show');
                    }
                });
            }

            // Close modal with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal && modal.classList.contains('show')) {
                    modal.classList.remove('show');
                }
            });
        })();

    </script>
</body>
</html>
